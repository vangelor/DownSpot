var Xn=Object.defineProperty;var o=(i,e)=>Xn(i,"name",{value:e,configurable:!0});var h=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports);var vt=h(At=>{"use strict";Object.defineProperty(At,"__esModule",{value:!0});var Rt=class Rt extends Error{constructor(e,t){super(e),this.statusCode=t||0}};o(Rt,"RequestError");var St=Rt;At.default=St});var ai=h(he=>{"use strict";var Qn=he&&he.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(he,"__esModule",{value:!0});var Jn=Qn(vt()),Mt=class Mt extends Jn.default{constructor(e,t,r){super(e),this.response=t,this.statusCode=r||0}};o(Mt,"PlayerRequestError");var Ct=Mt;he.default=Ct});var oi=h(It=>{"use strict";Object.defineProperty(It,"__esModule",{value:!0});var Lt=class Lt extends Error{constructor(e,t=null){super(e),this.playabilityStatus=t}};o(Lt,"UnrecoverableError");var Ot=Lt;It.default=Ot});var si=h(Nt=>{"use strict";Object.defineProperty(Nt,"__esModule",{value:!0});var Ut=class Ut extends Error{constructor(e){super(e)}};o(Ut,"PlatformError");var Dt=Ut;Nt.default=Dt});var be=h(v=>{"use strict";var Fe=v&&v.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(v,"__esModule",{value:!0});v.PlatformError=v.RequestError=v.UnrecoverableError=v.PlayerRequestError=void 0;var Zn=ai();Object.defineProperty(v,"PlayerRequestError",{enumerable:!0,get:o(function(){return Fe(Zn).default},"get")});var ea=oi();Object.defineProperty(v,"UnrecoverableError",{enumerable:!0,get:o(function(){return Fe(ea).default},"get")});var ta=vt();Object.defineProperty(v,"RequestError",{enumerable:!0,get:o(function(){return Fe(ta).default},"get")});var ra=si();Object.defineProperty(v,"PlatformError",{enumerable:!0,get:o(function(){return Fe(ra).default},"get")})});var E=h(xe=>{"use strict";Object.defineProperty(xe,"__esModule",{value:!0});xe.Logger=void 0;var ia=P(),na={red:"",green:"",yellow:"",blue:"",magenta:"",reset:""},aa={red:"\x1B[31m",green:"\x1B[32m",yellow:"\x1B[33m",blue:"\x1B[34m",magenta:"\x1B[35m",reset:"\x1B[0m"},kt=class kt{static replaceColorTags(e){try{e=e.replace(/<magenta>/g,this.outputControlCharacter.magenta),e=e.replace(/<\/magenta>/g,this.outputControlCharacter.reset),e=e.replace(/<debug>/g,this.outputControlCharacter.magenta),e=e.replace(/<\/debug>/g,this.outputControlCharacter.reset),e=e.replace(/<blue>/g,this.outputControlCharacter.blue),e=e.replace(/<\/blue>/g,this.outputControlCharacter.reset),e=e.replace(/<info>/g,this.outputControlCharacter.blue),e=e.replace(/<\/info>/g,this.outputControlCharacter.reset),e=e.replace(/<green>/g,this.outputControlCharacter.green),e=e.replace(/<\/green>/g,this.outputControlCharacter.reset),e=e.replace(/<success>/g,this.outputControlCharacter.green),e=e.replace(/<\/success>/g,this.outputControlCharacter.reset),e=e.replace(/<yellow>/g,this.outputControlCharacter.yellow),e=e.replace(/<\/yellow>/g,this.outputControlCharacter.reset),e=e.replace(/<warning>/g,this.outputControlCharacter.yellow),e=e.replace(/<\/warning>/g,this.outputControlCharacter.reset),e=e.replace(/<red>/g,this.outputControlCharacter.red),e=e.replace(/<\/red>/g,this.outputControlCharacter.reset),e=e.replace(/<error>/g,this.outputControlCharacter.red),e=e.replace(/<\/error>/g,this.outputControlCharacter.reset)}catch{}return e}static convertMessage(e){return this.replaceColorTags(e)}static convertMessages(e){return e.map(t=>this.replaceColorTags(t))}static initialization(){ia.Platform.getShim().runtime==="default"&&(this.outputControlCharacter=aa)}static debug(...e){this.logDisplay.includes("debug")&&console.log(this.convertMessage("<debug>[  DEBUG  ]:</debug>"),...this.convertMessages(e))}static info(...e){this.logDisplay.includes("info")&&console.info(this.convertMessage("<info>[  INFO!  ]:</info>"),...this.convertMessages(e))}static success(...e){this.logDisplay.includes("success")&&console.log(this.convertMessage("<success>[ SUCCESS ]:</success>"),...this.convertMessages(e))}static warning(...e){this.logDisplay.includes("warning")&&console.warn(this.convertMessage("<warning>[ WARNING ]:</warning>"),...this.convertMessages(e))}static error(...e){this.logDisplay.includes("error")&&console.error(this.convertMessage("<error>[  ERROR  ]:</error>"),...this.convertMessages(e))}};o(kt,"Logger");var pe=kt;xe.Logger=pe;pe.logDisplay=["info","success","warning","error"];pe.outputControlCharacter=na});var P=h(K=>{"use strict";var oa=K&&K.__classPrivateFieldSet||function(i,e,t,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!n:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(i,t):n?n.value=t:e.set(i,t),t},li=K&&K.__classPrivateFieldGet||function(i,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!r:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(i):r?r.value:e.get(i)},$e,Ve;Object.defineProperty(K,"__esModule",{value:!0});K.Platform=void 0;var sa=be(),la=E(),qt=class qt{static load(e){e.fileCache.initialization(),oa(this,$e,e,"f",Ve),la.Logger.initialization()}static getShim(){if(!li(this,$e,"f",Ve))throw new sa.PlatformError("Platform is not loaded");return li(this,$e,"f",Ve)}};o(qt,"Platform");var je=qt;K.Platform=je;$e=je;Ve={value:void 0}});var ui=h((nl,ua)=>{ua.exports={name:"@ybd-project/ytdl-core",version:"6.0.8",description:"YBD Project fork of ytdl-core.",author:"YBD Project",repository:{type:"git",url:"git://github.com/ybd-project/ytdl-core.git"},engines:{node:">=16.0"},main:"./package/platforms/Default/Default.js",types:"./package/platforms/Default/Default.d.ts",exports:{".":{types:"./package/platforms/Default/Default.d.ts",node:{import:"./package/platforms/Default/Default.js",require:"./bundle/node.cjs"},browser:"./package/platforms/Browser/Browser.js",default:"./package/platforms/Default/Default.js"},"./default":{types:"./package/platforms/Default/Default.d.ts",default:"./package/platforms/Default/Default.js"},"./default.bundle":{types:"./package/platforms/Default/Default.d.ts",default:"./bundle/node.cjs"},"./browser":{types:"./package/platforms/Browser/Browser.d.ts",default:"./package/platforms/Browser/Browser.js"},"./browser.bundle":{types:"./package/platforms/Browser/Browser.d.ts",default:"./bundle/browser.min.js"},"./serverless":{types:"./package/platforms/Serverless/Serverless.d.ts",default:"./package/platforms/Serverless/Serverless.js"},"./serverless.bundle":{types:"./package/platforms/Serverless/Serverless.d.ts",default:"./bundle/serverless.cjs"},"./types":{types:"./package/types/index.d.ts",default:"./package/types/index.d.ts"}},files:["package","bundle"],scripts:{test:"npx jest ./test/main.test.ts --detectOpenHandles","clear-cache-files":"cd package/core && rmdir /s /q CacheFiles 2>nul & cd ../..",build:"node ./scripts/getPlayerData.mjs && rmdir /s /q package & tsc && tsc-alias && npm run clear-cache-files && npm run create-bundles","publish:npm":"node ./scripts/publish.mjs latest && npm run build && npm publish --registry=https://registry.npmjs.org/","publish:npm-alpha":"node ./scripts/publish.mjs alpha && npm run build && npm publish --registry=https://registry.npmjs.org/ --tag alpha","publish:npm-beta":"node ./scripts/publish.mjs beta && npm run build && npm publish --registry=https://registry.npmjs.org/ --tag beta","create-bundles":"npm run create-node-bundle && npm run create-browser-bundle && npm run create-serverless-bundle","create-node-bundle":"rmdir /s /q bundle & mkdir bundle && esbuild ./package/platforms/Default/Default.js --bundle --target=node16 --keep-names --format=cjs --platform=node --outfile=./bundle/node.cjs --minify","create-browser-bundle":"node ./scripts/createBrowserBundle.mjs","create-serverless-bundle":"esbuild ./package/platforms/Serverless/Serverless.js --bundle --target=node16 --keep-names --format=cjs --platform=node --outfile=./bundle/serverless.cjs --minify",update:"ncu && ncu -u && npm i","deleteNodeModules:examples":"node ./scripts/deleteExamplesNodeModules.js"},dependencies:{acorn:"^8.14.0","bgutils-js":"^3.0.0",jsdom:"^25.0.1",undici:"^6.20.1"},devDependencies:{"@inquirer/prompts":"^7.0.0","@types/jest":"^29.5.13","@types/jsdom":"^21.1.7","@types/node":"^22.7.7","@types/sax":"^1.2.7",esbuild:"^0.24.0",eslint:"^9.13.0",jest:"^29.7.0","npm-check-updates":"^17.1.4","ts-jest":"^29.2.5","tsc-alias":"^1.8.10",typescript:"^5.6.3"},keywords:["youtube","video","audio","download","getInfo","ybd-project","ytdl","ytdl-core","secure","fast","browser","serverless","typescript"],license:"MIT"}});var Ke=h(w=>{"use strict";var ca=w&&w.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(w,"__esModule",{value:!0});w.ISSUES_URL=w.REPO_NAME=w.USER_NAME=w.VERSION=w.CURRENT_PLAYER_ID=void 0;var da=ca(ui());w.CURRENT_PLAYER_ID="0ccfa671";w.VERSION=da.default.version;w.USER_NAME="ybd-project";w.REPO_NAME="ytdl-core";w.ISSUES_URL=`https://github.com/${w.USER_NAME}/${w.REPO_NAME}/issues`});var q=h(Ge=>{"use strict";Object.defineProperty(Ge,"__esModule",{value:!0});Ge.Url=void 0;var k="https://www.youtube.com",fa=/^https?:\/\//,ci=/^[a-zA-Z0-9-_]{11}$/,ha=new Set(["youtube.com","www.youtube.com","m.youtube.com","music.youtube.com","gaming.youtube.com"]),ba=/^https?:\/\/(youtu\.be\/|(www\.)?youtube\.com\/(embed|v|shorts|live)\/)/,Bt=class Bt{static getBaseUrl(){return k}static getPlayerJsUrl(e){return`${k}/s/player/${e}/player_ias.vflset/en_US/base.js`}static getWatchPageUrl(e){return`${k}/watch?v=${e}`}static getEmbedUrl(e){return`${k}/embed/${e}`}static getIframeApiUrl(){return`${k}/iframe_api`}static getInnertubeBaseUrl(){return`${k}/youtubei/v1`}static getTvUrl(){return`${k}/tv`}static getTokenApiUrl(){return`${k}/o/oauth2/token`}static getDeviceCodeApiUrl(){return`${k}/o/oauth2/device/code`}static validateID(e){return ci.test(e.trim())}static getURLVideoID(e){let t=new URL(e.trim()),r=t.searchParams.get("v");if(ba.test(e.trim())&&!r){let n=t.pathname.split("/");r=t.host==="youtu.be"?n[1]:n[2]}else if(t.hostname&&!ha.has(t.hostname))throw new Error("Not a YouTube domain");if(!r)throw new Error(`No video id found: "${e}"`);if(r=r.substring(0,11),!this.validateID(r))throw new TypeError(`Video id (${r}) does not match expected format (${ci.toString()})`);return r}static getVideoID(e){return this.validateID(e)?e:fa.test(e.trim())?this.getURLVideoID(e):null}static validateURL(e){try{return this.getURLVideoID(e),!0}catch{return!1}}};o(Bt,"Url");var Ht=Bt;Ge.Url=Ht});var ge=h(We=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0});We.UserAgent=void 0;var di={desktop:["Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.3 Safari/605.1.15","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36 Edg/109.0.1518.61"],ios:["Mozilla/5.0 (iPhone; CPU iPhone OS 16_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/127.0.0.0 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPad; CPU OS 15_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/126.0.1.45 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 14_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/123.0.2.98 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPad; CPU OS 16_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/125.0.3.110 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 15_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/124.0.5.72 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPad; CPU OS 14_7 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/122.0.4.82 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/128.0.1.101 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPad; CPU OS 15_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/125.0.1.95 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 14_8 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/121.0.2.67 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPad; CPU OS 16_3 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/129.0.0.85 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 15_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/126.0.3.92 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPad; CPU OS 14_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/123.0.5.105 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/127.0.2.56 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPad; CPU OS 15_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/124.0.1.30 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 14_3 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/120.0.4.102 Mobile/15E148 Safari/604.1"],android:["Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.6613.146 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/127.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 13; K) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/128.0.6613.127 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 14; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.6613.128 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 11; K) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/128.0.6613.127 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 14; K) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/128.0.6613.127 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 13; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.6613.128 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 9; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.6613.146 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 12; K) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/128.0.6613.127 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/128.0.6613.127 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) SamsungBrowser/26.0 Chrome/122.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/92.0.4515.105 Mobile Safari/537.36"],tv:["Mozilla/5.0 (ChromiumStylePlatform) Cobalt/Version"]},Ft=class Ft{static getRandomUserAgent(e){let t=di[e];return t?t[Math.floor(Math.random()*t.length)]:di.desktop[0]}};o(Ft,"UserAgent");var J=Ft;We.UserAgent=J;J.default="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/127.0.0.0 Safari/537.36";J.ios="com.google.ios.youtube/19.29.1 (iPhone16,2; U; CPU iOS 17_5_1 like Mac OS X;)";J.android="com.google.android.youtube/19.35.36(Linux; U; Android 13; en_US; SM-S908E Build/TP1A.220624.014) gzip";J.tv="Mozilla/5.0 (ChromiumStylePlatform) Cobalt/Version"});var te=h(Ye=>{"use strict";Object.defineProperty(Ye,"__esModule",{value:!0});Ye.Fetcher=void 0;var pa=P(),ga=E(),ma=ge(),ya=be(),me=class me{static async fetch(e,t,r=!1){var a;let n=pa.Platform.getShim(),{rewriteRequest:l,originalProxy:u}=n.requestRelated;if(!r){if(typeof l=="function"){let s=l(e,t||{},{isDownloadUrl:!1});t=s.options,e=s.url}if(u)try{let s=new URL(u.base);e.includes(s.host)||(e=`${s.protocol}//${s.host}/?${u.urlQueryName||"url"}=${encodeURIComponent(e)}`)}catch{}}ga.Logger.debug(`[ Request ]: <magenta>${(t==null?void 0:t.method)||"GET"}</magenta> -> ${e}`);let c=new n.polyfills.Headers;return t!=null&&t.headers&&Object.entries(t.headers).forEach(([s,d])=>{d&&c.append(s,d.toString())}),c.has("User-Agent")||c.append("User-Agent",ma.UserAgent.getRandomUserAgent("desktop")),await n.fetcher(e,{method:(t==null?void 0:t.method)||"GET",headers:c,body:(a=t==null?void 0:t.body)==null?void 0:a.toString()})}static async request(e,{requestOptions:t,rewriteRequest:r,originalProxy:n}={}){var s;if(typeof r=="function"){let d=r(e,t||{},{isDownloadUrl:!1});t=d.options,e=d.url}if(n)try{let d=new URL(n.base);e.includes(d.host)||(e=`${d.protocol}//${d.host}${d.pathname}?${n.urlQueryName||"url"}=${encodeURIComponent(e)}`)}catch{}let l=await me.fetch(e,{method:(t==null?void 0:t.method)||"GET",headers:t==null?void 0:t.headers,body:(s=t==null?void 0:t.body)==null?void 0:s.toString()},!0),u=l.status.toString(),c=l.headers.get("location")||null;if(u.startsWith("2"))return(l.headers.get("content-type")||"").includes("application/json")?l.json():l.text();if(u.startsWith("3")&&c)return me.request(c.toString(),{requestOptions:t,rewriteRequest:r,originalProxy:n});throw new ya.RequestError(`Status Code: ${u}`,l.status)}};o(me,"Fetcher");var xt=me;Ye.Fetcher=xt});var ye=h(S=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0});S.lastUpdateCheck=void 0;S.between=Vt;S.tryParseBetween=hi;S.parseAbbreviatedNumber=bi;S.cutAfterJS=pi;S.checkForUpdates=_i;S.getPropInsensitive=gi;S.setPropInsensitive=mi;S.generateClientPlaybackNonce=yi;var _a=P(),Ta=te(),wa=Ke(),$t=E(),Ea=[{start:'"',end:'"'},{start:"'",end:"'"},{start:"`",end:"`"},{start:"/",end:"/",startPrefix:/(^|[[{:;,/])\s?$/}],Pa=1e3*60*60*12;function fi(i,e){return Object.keys(i).find(t=>t.toLowerCase()===e.toLowerCase())||null}o(fi,"findPropKeyInsensitive");function Vt(i,e,t){let r=null;if(e instanceof RegExp){let n=i.match(e);if(!n)return"";r=(n.index||0)+n[0].length}else{if(r=i.indexOf(e),r===-1)return"";r+=e.length}return i=i.slice(r),r=i.indexOf(t),r===-1?"":(i=i.slice(0,r),i)}o(Vt,"between");function hi(i,e,t,r="",n=""){try{let l=Vt(i,e,t);return l?JSON.parse(`${r}${l}${n}`):null}catch{return null}}o(hi,"tryParseBetween");function bi(i){let e=i.replace(",",".").replace(" ","").match(/([\d,.]+)([MK]?)/);if(e){let t=e[2],r=e[1];return r=parseFloat(r),Math.round(t==="M"?r*1e6:t==="K"?r*1e3:r)}return null}o(bi,"parseAbbreviatedNumber");function pi(i){let e=null,t=null;if(i[0]==="["?(e="[",t="]"):i[0]==="{"&&(e="{",t="}"),!e)throw new Error(`Can't cut unsupported JSON (need to begin with [ or { ) but got: ${i[0]}`);let r=null,n=!1,l=0;for(let u=0;u<i.length;u++){if(r!==null&&!n&&i[u]===r.end){r=null;continue}else if(!n&&r===null){for(let c of Ea)if(i[u]===c.start&&(!c.startPrefix||i.substring(u-10,u).match(c.startPrefix))){r=c;break}if(r!==null)continue}if(n=i[u]==="\\"&&!n,r===null&&(i[u]===e?l++:i[u]===t&&l--,l===0))return i.slice(0,u+1)}throw new Error("Can't cut unsupported JSON (no matching closing bracket found)")}o(pi,"cutAfterJS");function gi(i,e){let t=fi(i,e);return t&&i[t]}o(gi,"getPropInsensitive");function mi(i,e,t){let r=fi(i,e);return i[r||e]=t,r}o(mi,"setPropInsensitive");function yi(i){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";return Array.from({length:i},()=>e[Math.floor(Math.random()*e.length)]).join("")}o(yi,"generateClientPlaybackNonce");var Sa=0,ze=0;S.lastUpdateCheck=ze;function _i(){let i=_a.Platform.getShim();if(!i.options.other.noUpdate&&Date.now()-ze>=Pa){S.lastUpdateCheck=ze=Date.now();let t=`https://raw.githubusercontent.com/${i.info.repo.user}/${i.info.repo.name}/dev/package.json`;Ta.Fetcher.request(t,{requestOptions:{headers:{"User-Agent":'Chromium";v="112", "Microsoft Edge";v="112", "Not:A-Brand";v="99'}}}).then(r=>{JSON.parse(r).version!==wa.VERSION&&Sa++<5&&$t.Logger.warning('@ybd-project/ytdl-core is out of date! Update with "npm install @ybd-project/ytdl-core@latest".')},r=>{$t.Logger.warning("Error checking for updates:",r.message),$t.Logger.warning("It can be disabled by setting `noUpdate` to `true` in the YtdlCore options.")})}}o(_i,"checkForUpdates");S.default={between:Vt,tryParseBetween:hi,parseAbbreviatedNumber:bi,cutAfterJS:pi,lastUpdateCheck:ze,checkForUpdates:_i,getPropInsensitive:gi,setPropInsensitive:mi,generateClientPlaybackNonce:yi}});var x=h(re=>{"use strict";var Aa=re&&re.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(re,"__esModule",{value:!0});re.Clients=void 0;var jt=Aa(ye()),G=ge(),Ra=q(),H=Ra.Url.getInnertubeBaseUrl(),B=Object.freeze({web:{context:{client:{clientName:"WEB",clientVersion:"2.20240726.00.00",userAgent:G.UserAgent.default}},clientName:1,apiInfo:{key:"AIzaSyAO_FJ2SlqU8Q4STEHLGCilw_Y9_11qcW8"}},webCreator:{context:{client:{clientName:"WEB_CREATOR",clientVersion:"1.20240918.03.00",userAgent:G.UserAgent.default}},clientName:62,apiInfo:{key:"AIzaSyBUPetSUmoZL-OhlxA7wSac5XinrygCqMo"}},webEmbedded:{context:{client:{clientName:"WEB_EMBEDDED_PLAYER",clientVersion:"2.20240111.09.00",userAgent:G.UserAgent.default,clientScreen:"EMBED"}},clientName:56,apiInfo:{key:"AIzaSyAO_FJ2SlqU8Q4STEHLGCilw_Y9_11qcW8"}},android:{context:{client:{clientName:"ANDROID",clientVersion:"19.35.36",androidSdkVersion:33,userAgent:G.UserAgent.android,osName:"Android",osVersion:"13"}},clientName:3,apiInfo:{key:"AIzaSyA8eiZmM1FaDVjRy-df2KTyQ_vz_yYM39w"}},ios:{context:{client:{clientName:"IOS",clientVersion:"19.29.1",deviceMake:"Apple",deviceModel:"iPhone16,2",userAgent:G.UserAgent.ios,osName:"iPhone",osVersion:"17.5.1.21F90"}},clientName:5,apiInfo:{key:"AIzaSyB-63vPrdThhKuerbB2N_l7Kwwcxj6yUAc"}},mweb:{context:{client:{clientName:"MWEB",clientVersion:"2.20240726.01.00",userAgent:G.UserAgent.default}},clientName:2,apiInfo:{}},tv:{context:{client:{clientName:"TVHTML5",clientVersion:"7.20241016.15.00",userAgent:G.UserAgent.tv}},clientName:7,apiInfo:{}},tvEmbedded:{context:{client:{clientName:"TVHTML5_SIMPLY_EMBEDDED_PLAYER",clientVersion:"2.0",userAgent:G.UserAgent.tv},thirdParty:{embedUrl:"https://www.youtube.com/"}},clientName:85,apiInfo:{}}}),F={videoId:"",cpn:jt.default.generateClientPlaybackNonce(16),contentCheckOk:!0,racyCheckOk:!0,serviceIntegrityDimensions:{},playbackContext:{contentPlaybackContext:{vis:0,splay:!1,referer:"",currentUrl:"",autonavState:"STATE_ON",autoCaptionsDefaultOn:!1,html5Preference:"HTML5_PREF_WANTS",lactMilliseconds:"-1",signatureTimestamp:0}},attestationRequest:{omitBotguardData:!0},context:{client:{},request:{useSsl:!0,internalExperimentFlags:[],consistencyTokenJars:[]},user:{lockedSafetyMode:!1}}},C=class C{static getAuthorizationHeader(e){return e&&e.isEnabled?{authorization:"Bearer "+e.getAccessToken(),"X-Goog-AuthUser":"0"}:{}}static web({videoId:e,signatureTimestamp:t,options:{poToken:r,visitorData:n,oauth2:l,hl:u,gl:c}}){let a=B.web,s={...F};return s.videoId=e,s.playbackContext.contentPlaybackContext.signatureTimestamp=t,s.context.client=a.context.client,s.context.client.hl=u||"en",s.context.client.gl=c||"US",r?s.serviceIntegrityDimensions.poToken=r:s.serviceIntegrityDimensions=void 0,n&&(s.context.client.visitorData=n),{url:`${H}/player?key=${a.apiInfo.key}&prettyPrint=false`,payload:s,headers:{"X-YouTube-Client-Name":a.clientName,"X-Youtube-Client-Version":a.context.client.clientVersion,"X-Goog-Visitor-Id":n,"User-Agent":a.context.client.userAgent,...C.getAuthorizationHeader(l)}}}static web_nextApi({videoId:e,options:{poToken:t,visitorData:r,oauth2:n,hl:l,gl:u}}){let c=B.web,a={...F,autonavState:"STATE_OFF",playbackContext:{vis:0,lactMilliseconds:"-1"},captionsRequested:!1};return a.videoId=e,a.context.client=c.context.client,a.context.client.hl=l||"en",a.context.client.gl=u||"US",t?a.serviceIntegrityDimensions.poToken=t:a.serviceIntegrityDimensions=void 0,r&&(a.context.client.visitorData=r),{url:`${H+"/next"}?key=${c.apiInfo.key}&prettyPrint=false`,payload:a,headers:{"X-YouTube-Client-Name":c.clientName,"X-Youtube-Client-Version":c.context.client.clientVersion,"X-Goog-Visitor-Id":r,"User-Agent":c.context.client.userAgent,...C.getAuthorizationHeader(n)}}}static webCreator({videoId:e,signatureTimestamp:t,options:{poToken:r,visitorData:n,oauth2:l,hl:u,gl:c}}){let a=B.webCreator,s={...F};return s.videoId=e,s.playbackContext.contentPlaybackContext.signatureTimestamp=t,s.context.client=a.context.client,s.context.client.hl=u||"en",s.context.client.gl=c||"US",r?s.serviceIntegrityDimensions.poToken=r:s.serviceIntegrityDimensions=void 0,n&&(s.context.client.visitorData=n),{url:`${H}/player?key=${a.apiInfo.key}&prettyPrint=false`,payload:s,headers:{"X-YouTube-Client-Name":a.clientName,"X-Youtube-Client-Version":a.context.client.clientVersion,"X-Goog-Visitor-Id":n,"User-Agent":a.context.client.userAgent,...C.getAuthorizationHeader(l)}}}static webEmbedded({videoId:e,signatureTimestamp:t,options:{poToken:r,visitorData:n,oauth2:l,hl:u,gl:c}}){let a=B.webEmbedded,s={...F};return s.videoId=e,s.playbackContext.contentPlaybackContext.signatureTimestamp=t,s.context.client=a.context.client,s.context.client.hl=u||"en",s.context.client.gl=c||"US",r?s.serviceIntegrityDimensions.poToken=r:s.serviceIntegrityDimensions=void 0,n&&(s.context.client.visitorData=n),{url:`${H}/player?key=${a.apiInfo.key}&prettyPrint=false`,payload:s,headers:{"X-YouTube-Client-Name":a.clientName,"X-Youtube-Client-Version":a.context.client.clientVersion,"X-Goog-Visitor-Id":n,"User-Agent":a.context.client.userAgent,...C.getAuthorizationHeader(l)}}}static android({videoId:e,signatureTimestamp:t,options:{poToken:r,visitorData:n,oauth2:l,hl:u,gl:c}}){let a=B.android,s={...F};return s.videoId=e,s.playbackContext.contentPlaybackContext.signatureTimestamp=t,s.context.client=a.context.client,s.context.client.hl=u||"en",s.context.client.gl=c||"US",r?s.serviceIntegrityDimensions.poToken=r:s.serviceIntegrityDimensions=void 0,n&&(s.context.client.visitorData=n),{url:`${H}/player?key=${a.apiInfo.key}&prettyPrint=false&id=${e}&t=${jt.default.generateClientPlaybackNonce(12)}`,payload:s,headers:{"X-YouTube-Client-Name":a.clientName,"X-Youtube-Client-Version":a.context.client.clientVersion,"X-Goog-Visitor-Id":n,"User-Agent":a.context.client.userAgent,...C.getAuthorizationHeader(l)}}}static ios({videoId:e,signatureTimestamp:t,options:{poToken:r,visitorData:n,oauth2:l,hl:u,gl:c}}){let a=B.ios,s={...F};return s.videoId=e,s.playbackContext.contentPlaybackContext.signatureTimestamp=t,s.context.client=a.context.client,s.context.client.hl=u||"en",s.context.client.gl=c||"US",r?s.serviceIntegrityDimensions.poToken=r:s.serviceIntegrityDimensions=void 0,n&&(s.context.client.visitorData=n),{url:`${H}/player?key=${a.apiInfo.key}&prettyPrint=false&id=${e}&t=${jt.default.generateClientPlaybackNonce(12)}`,payload:s,headers:{"X-YouTube-Client-Name":a.clientName,"X-Youtube-Client-Version":a.context.client.clientVersion,"X-Goog-Visitor-Id":n,"User-Agent":a.context.client.userAgent,...C.getAuthorizationHeader(l)}}}static mweb({videoId:e,signatureTimestamp:t,options:{poToken:r,visitorData:n,oauth2:l,hl:u,gl:c}}){let a=B.mweb,s={...F};return s.videoId=e,s.playbackContext.contentPlaybackContext.signatureTimestamp=t,s.context.client=a.context.client,s.context.client.hl=u||"en",s.context.client.gl=c||"US",r?s.serviceIntegrityDimensions.poToken=r:s.serviceIntegrityDimensions=void 0,n&&(s.context.client.visitorData=n),{url:`${H}/player?prettyPrint=false`,payload:s,headers:{"X-YouTube-Client-Name":a.clientName,"X-Youtube-Client-Version":a.context.client.clientVersion,"X-Goog-Visitor-Id":n,"User-Agent":a.context.client.userAgent,...C.getAuthorizationHeader(l)}}}static tv({videoId:e,signatureTimestamp:t,options:{poToken:r,visitorData:n,oauth2:l,hl:u,gl:c}}){let a=B.tv,s={...F};return s.videoId=e,s.playbackContext.contentPlaybackContext.signatureTimestamp=t,s.context.client=a.context.client,s.context.client.hl=u||"en",s.context.client.gl=c||"US",r?s.serviceIntegrityDimensions.poToken=r:s.serviceIntegrityDimensions=void 0,n&&(s.context.client.visitorData=n),{url:`${H}/player?prettyPrint=false`,payload:s,headers:{"X-YouTube-Client-Name":a.clientName,"X-Youtube-Client-Version":a.context.client.clientVersion,"X-Goog-Visitor-Id":n,"User-Agent":a.context.client.userAgent,...C.getAuthorizationHeader(l)}}}static tvEmbedded({videoId:e,signatureTimestamp:t,options:{poToken:r,visitorData:n,oauth2:l,hl:u,gl:c}}){let a=B.tvEmbedded,s={...F};return s.videoId=e,s.playbackContext.contentPlaybackContext.signatureTimestamp=t,s.context.client=a.context.client,s.context.client.hl=u||"en",s.context.client.gl=c||"US",r?s.serviceIntegrityDimensions.poToken=r:s.serviceIntegrityDimensions=void 0,n&&(s.context.client.visitorData=n),{url:`${H}/player?prettyPrint=false`,payload:s,headers:{"X-YouTube-Client-Name":a.clientName,"X-Youtube-Client-Version":a.context.client.clientVersion,"X-Goog-Visitor-Id":n,"User-Agent":a.context.client.userAgent,...C.getAuthorizationHeader(l)}}}};o(C,"Clients");var Kt=C;re.Clients=Kt});var $=h(Wt=>{"use strict";Object.defineProperty(Wt,"__esModule",{value:!0});var va=P(),Xe=be(),Ti=te(),Ca=E(),wi=va.Platform.getShim(),Yt=class Yt{static playError(e){let t=e&&e.playabilityStatus;if(!t)return null;let r=e.playabilityStatus.reason||null;return t.status==="ERROR"||t.status==="LOGIN_REQUIRED"?new Xe.UnrecoverableError(t.reason||t.messages&&t.messages[0]||"Unknown error.",r):t.status==="LIVE_STREAM_OFFLINE"?new Xe.UnrecoverableError(t.reason||"The live stream is offline.",r):t.status==="UNPLAYABLE"?new Xe.UnrecoverableError(t.reason||"This video is unavailable.",r):null}static request(e,t,r,n){return new Promise(async(l,u)=>{let c={"Content-Type":"application/json","X-Origin":"https://www.youtube.com",...t.headers},a={requestOptions:{method:"POST",headers:c,body:typeof t.payload=="string"?t.payload:JSON.stringify(t.payload)},rewriteRequest:r.options.rewriteRequest,originalProxy:r.options.originalProxy},s=e.includes("/next"),d=!r.options.disableRetryRequest&&((a.originalProxy||a.rewriteRequest)&&wi.runtime!=="browser"||c.Authorization),p=o((f,g=!1)=>{let _=this.playError(f);if(_)return!g&&d?b(_):u({isError:!0,error:_,contents:f});if(!s&&(!f.videoDetails||r.videoId!==f.videoDetails.videoId)){let y=new Xe.PlayerRequestError("Malformed response from YouTube",f,null);return y.response=f,!g&&d?b(y):u({isError:!0,error:y,contents:f})}l({isError:!1,error:null,contents:f})},"responseHandler"),b=o(f=>{var _;a.originalProxy=void 0,a.rewriteRequest=void 0;let g=new wi.polyfills.Headers((_=a.requestOptions)==null?void 0:_.headers);g.delete("Authorization"),a.requestOptions||(a.requestOptions={}),a.requestOptions.headers=g,Ca.Logger.debug(`[ ${n} ]: <info>Wait 2 seconds</info> and <warning>retry request...</warning> (Reason: <error>${f==null?void 0:f.message}</error>)`),setTimeout(()=>{Ti.Fetcher.request(e,a).then(y=>p(y,!0)).catch(y=>{u({isError:!0,error:y,contents:null})})},2e3)},"retryRequest");try{Ti.Fetcher.request(e,a).then(f=>p(f,!1)).catch(f=>{if(d)return b(f);u({isError:!0,error:f,contents:null})})}catch(f){u({isError:!0,error:f,contents:null})}})}};o(Yt,"Base");var Gt=Yt;Wt.default=Gt});var Si=h(_e=>{"use strict";var Ma=_e&&_e.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(_e,"__esModule",{value:!0});var Ei=x(),Pi=Ma($()),Xt=class Xt{static async getPlayerResponse(e){let{url:t,payload:r,headers:n}=Ei.Clients.web(e);return await Pi.default.request(t,{payload:r,headers:n},e,"Web")}static async getNextResponse(e){let{url:t,payload:r,headers:n}=Ei.Clients.web_nextApi(e);return await Pi.default.request(t,{payload:r,headers:n},e,"Next")}};o(Xt,"Web");var zt=Xt;_e.default=zt});var Ai=h(Te=>{"use strict";var Oa=Te&&Te.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Te,"__esModule",{value:!0});var Ia=x(),La=Oa($()),Jt=class Jt{static async getPlayerResponse(e){let{url:t,payload:r,headers:n}=Ia.Clients.webCreator(e);return await La.default.request(t,{payload:r,headers:n},e,"WebCreator")}};o(Jt,"WebCreator");var Qt=Jt;Te.default=Qt});var Ri=h(we=>{"use strict";var Da=we&&we.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(we,"__esModule",{value:!0});var Na=x(),Ua=Da($()),er=class er{static async getPlayerResponse(e){let{url:t,payload:r,headers:n}=Na.Clients.webEmbedded(e);return await Ua.default.request(t,{payload:r,headers:n},e,"WebEmbedded")}};o(er,"WebEmbedded");var Zt=er;we.default=Zt});var vi=h(Ee=>{"use strict";var ka=Ee&&Ee.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ee,"__esModule",{value:!0});var qa=x(),Ha=ka($()),rr=class rr{static async getPlayerResponse(e){let{url:t,payload:r,headers:n}=qa.Clients.mweb(e);return await Ha.default.request(t,{payload:r,headers:n},e,"MWeb")}};o(rr,"MWeb");var tr=rr;Ee.default=tr});var Ci=h(Pe=>{"use strict";var Ba=Pe&&Pe.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Pe,"__esModule",{value:!0});var Fa=x(),xa=Ba($()),nr=class nr{static async getPlayerResponse(e){let{url:t,payload:r,headers:n}=Fa.Clients.android(e);return await xa.default.request(t,{payload:r,headers:n},e,"Android")}};o(nr,"Android");var ir=nr;Pe.default=ir});var Mi=h(Se=>{"use strict";var $a=Se&&Se.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Se,"__esModule",{value:!0});var Va=x(),ja=$a($()),or=class or{static async getPlayerResponse(e){let{url:t,payload:r,headers:n}=Va.Clients.ios(e);return await ja.default.request(t,{payload:r,headers:n},e,"Ios")}};o(or,"Ios");var ar=or;Se.default=ar});var Oi=h(Ae=>{"use strict";var Ka=Ae&&Ae.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ae,"__esModule",{value:!0});var Ga=x(),Wa=Ka($()),lr=class lr{static async getPlayerResponse(e){let{url:t,payload:r,headers:n}=Ga.Clients.tv(e);return await Wa.default.request(t,{payload:r,headers:n},e,"Tv")}};o(lr,"Tv");var sr=lr;Ae.default=sr});var Ii=h(Re=>{"use strict";var Ya=Re&&Re.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Re,"__esModule",{value:!0});var za=x(),Xa=Ya($()),cr=class cr{static async getPlayerResponse(e){let{url:t,payload:r,headers:n}=za.Clients.tvEmbedded(e);return await Xa.default.request(t,{payload:r,headers:n},e,"TvEmbedded")}};o(cr,"TvEmbedded");var ur=cr;Re.default=ur});var Qe=h(T=>{"use strict";var W=T&&T.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(T,"__esModule",{value:!0});T.TvEmbedded=T.Tv=T.Ios=T.Android=T.MWeb=T.WebEmbedded=T.WebCreator=T.Web=void 0;var Qa=Si();Object.defineProperty(T,"Web",{enumerable:!0,get:o(function(){return W(Qa).default},"get")});var Ja=Ai();Object.defineProperty(T,"WebCreator",{enumerable:!0,get:o(function(){return W(Ja).default},"get")});var Za=Ri();Object.defineProperty(T,"WebEmbedded",{enumerable:!0,get:o(function(){return W(Za).default},"get")});var eo=vi();Object.defineProperty(T,"MWeb",{enumerable:!0,get:o(function(){return W(eo).default},"get")});var to=Ci();Object.defineProperty(T,"Android",{enumerable:!0,get:o(function(){return W(to).default},"get")});var ro=Mi();Object.defineProperty(T,"Ios",{enumerable:!0,get:o(function(){return W(ro).default},"get")});var io=Oi();Object.defineProperty(T,"Tv",{enumerable:!0,get:o(function(){return W(io).default},"get")});var no=Ii();Object.defineProperty(T,"TvEmbedded",{enumerable:!0,get:o(function(){return W(no).default},"get")})});var hr=h(Ze=>{"use strict";Object.defineProperty(Ze,"__esModule",{value:!0});Ze.OAuth2=void 0;var ao=P(),A=E(),ie=q(),oo=ge(),so=Qe(),ve=te(),dr={tvScript:new RegExp('<script\\s+id="base-js"\\s+src="([^"]+)"[^>]*><\\/script>'),clientIdentity:new RegExp('clientId:"(?<client_id>[^"]+)",[^"]*?:"(?<client_secret>[^"]+)"')},Ce=ao.Platform.getShim().fileCache,Je=class Je{constructor(e){var t,r;if(this.isEnabled=!1,this.credentials={accessToken:"",refreshToken:"",expiryDate:""},this.accessToken="",this.refreshToken="",this.expiryDate="",!e){this.isEnabled=!1;return}if(this.isEnabled=!0,this.credentials=e,this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expiryDate=e.expiryDate,this.clientId=(t=e.clientData)==null?void 0:t.clientId,this.clientSecret=(r=e.clientData)==null?void 0:r.clientSecret,this.shouldRefreshToken())try{this.refreshAccessToken().finally(()=>this.availableTokenCheck())}catch{}else this.availableTokenCheck();Ce.set("oauth2",JSON.stringify(e))}async availableTokenCheck(){try{let e=await Ce.get("html5Player");so.Web.getPlayerResponse({videoId:"dQw4w9WgXcQ",signatureTimestamp:parseInt((e==null?void 0:e.signatureTimestamp)||"0")||0,options:{oauth2:this}}).then(()=>A.Logger.debug("The specified OAuth2 token is valid.")).catch(t=>{t.error.message.includes("401")&&this.error("Request using the specified token failed (Web Client). Generating the token again may fix the problem.")})}catch(e){(e.message||e.error.message).includes("401")&&this.error("Request using the specified token failed (Web Client). Generating the token again may fix the problem.")}}error(e){A.Logger.error(e),A.Logger.info("OAuth2 is disabled due to an error."),this.isEnabled=!1}async getClientData(){var u,c,a,s,d,p,b;let e=await Ce.get("oauth2")||{};if((u=e.clientData)!=null&&u.clientId&&((c=e.clientData)!=null&&c.clientSecret))return{clientId:e.clientData.clientId,clientSecret:e.clientData.clientSecret};let t={"User-Agent":oo.UserAgent.tv,Referer:ie.Url.getTvUrl()},r=await ve.Fetcher.fetch(ie.Url.getTvUrl(),{headers:t});if(!r.ok)return this.error("Failed to get client data: "+r.status),null;let n=await r.text(),l=(a=dr.tvScript.exec(n))==null?void 0:a[1];if(l){A.Logger.debug("Found YouTube TV script: "+l);let f=await ve.Fetcher.fetch(ie.Url.getBaseUrl()+l,{headers:t});if(!f.ok)return this.error("TV script request failed with status code: "+f.status),null;let g=await f.text(),_=(d=(s=dr.clientIdentity.exec(g))==null?void 0:s.groups)==null?void 0:d.client_id,y=(b=(p=dr.clientIdentity.exec(g))==null?void 0:p.groups)==null?void 0:b.client_secret;return!_||!y?(this.error("Could not obtain client ID. Please create an issue in the repository for possible specification changes on YouTube's side."),null):(A.Logger.debug("Found client ID: "+_),A.Logger.debug("Found client secret: "+y),{clientId:_,clientSecret:y})}return this.error("Could not obtain script URL. Please create an issue in the repository for possible specification changes on YouTube's side."),null}shouldRefreshToken(){return this.isEnabled?Date.now()>=new Date(this.expiryDate).getTime():!1}async refreshAccessToken(){if(this.isEnabled){if(!this.clientId||!this.clientSecret){let e=await this.getClientData();if(!e)return;this.clientId=e.clientId,this.clientSecret=e.clientSecret,Ce.set("oauth2",JSON.stringify({accessToken:this.accessToken,refreshToken:this.refreshToken,expiryDate:this.expiryDate,clientData:{clientId:e.clientId,clientSecret:e.clientSecret}}))}if(!this.refreshToken)return this.error("Refresh token is missing, make sure it is specified.");try{let e={client_id:this.clientId,client_secret:this.clientSecret,refresh_token:this.refreshToken,grant_type:"refresh_token"},t=await ve.Fetcher.fetch(ie.Url.getTokenApiUrl(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)return this.error(`Failed to refresh access token: ${t.status}`);let r=await t.json();if(r.error_code)return this.error("Authorization server returned an error: "+JSON.stringify(r));this.expiryDate=new Date(Date.now()+r.expires_in*1e3).toISOString(),this.accessToken=r.access_token}catch(e){this.error(e.message)}}}getAccessToken(){return this.accessToken}getCredentials(){return this.credentials}static async createOAuth2Credentials(e){return new Promise(async t=>{let r=await Ce.get("oauth2");if(console.log(r),r)return t(r);let n=new Je(null);function l(){t(null)}o(l,"errorHandle");function u(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){let a=Math.random()*16|0;return(c=="x"?a:a&3|8).toString(16)})}o(u,"generateUuidV4"),n.getClientData().then(c=>{if(!c)return t(null);let{clientId:a,clientSecret:s}=c;ve.Fetcher.fetch(ie.Url.getDeviceCodeApiUrl(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:a,scope:"http://gdata.youtube.com https://www.googleapis.com/auth/youtube-paid-content",device_id:u(),device_model:"ytlr::"})}).then(d=>d.json()).then(d=>{if(d.error||d.error_code)return A.Logger.error("[ OAuth2 ]: The OAuth2 credential could not be generated because of failure to obtain the device code."),l();A.Logger.info(`[ OAuth2 ]: Please open the following URL and follow the instructions: <debug>${d.verification_url}</debug>`),A.Logger.info(`[ OAuth2 ]: Please enter the following code: <warning>${d.user_code}</warning>`),typeof e=="function"&&e({verificationUrl:d.verification_url,code:d.user_code});let p=JSON.stringify({client_id:a,client_secret:s,code:d.device_code,grant_type:"http://oauth.net/grant_type/device/1.0"}),b=setInterval(async()=>{let f=await(await ve.Fetcher.fetch(ie.Url.getTokenApiUrl(),{method:"POST",headers:{"Content-Type":"application/json"},body:p})).json();if(f.error){switch(f.error){case"authorization_pending":case"slow_down":A.Logger.debug("[ OAuth2 ]: Polling for access token...");break;case"access_denied":{A.Logger.error("[ OAuth2 ]: Generation of OAuth2 credentials failed because access to the API was forbidden."),t(null),clearInterval(b);break}case"expired_token":{A.Logger.error("[ OAuth2 ]: OAuth2 credential generation failed because the device code has expired."),t(null),clearInterval(b);break}default:{A.Logger.error("[ OAuth2 ]: OAuth2 credential generation failed because the API responded with the following error code:"+f.error),t(null),clearInterval(b);break}}return}A.Logger.debug(`[ OAuth2 ]: Success to obtain access token: <success>${f.access_token}</success>`),t({accessToken:f.access_token,refreshToken:f.refresh_token,expiryDate:new Date(Date.now()+f.expires_in*1e3).toISOString(),clientData:{clientId:a,clientSecret:s}}),clearInterval(b)},d.interval*1e3)}).catch(l)}).catch(l)})}};o(Je,"OAuth2");var fr=Je;Ze.OAuth2=fr});var yr=h(tt=>{"use strict";Object.defineProperty(tt,"__esModule",{value:!0});tt.getDecipherFunction=Ro;tt.getNTransformFunction=vo;var lo=P(),Ui=E(),uo=["\\bm=([a-zA-Z0-9$]{2,})\\(decodeURIComponent\\(h\\.s\\)\\)","\\bc&&\\(c=([a-zA-Z0-9$]{2,})\\(decodeURIComponent\\(c\\)\\)",'(?:\\b|[^a-zA-Z0-9$])([a-zA-Z0-9$]{2,})\\s*=\\s*function\\(\\s*a\\s*\\)\\s*\\{\\s*a\\s*=\\s*a\\.split\\(\\s*""\\s*\\)','([\\w$]+)\\s*=\\s*function\\((\\w+)\\)\\{\\s*\\2=\\s*\\2\\.split\\(""\\)\\s*;'],Me="[a-zA-Z_\\$][a-zA-Z_0-9]*",et=`\\"?${Me}\\"?`,co='(?:\\[\\"|\\.)',fo='(?:\\"\\]|)',ho=co+Me+fo,bo=":function\\(a\\)\\{(?:return )?a\\.reverse\\(\\)\\}",po=":function\\(a,b\\)\\{return a\\.slice\\(b\\)\\}",go=":function\\(a,b\\)\\{a\\.splice\\(0,b\\)\\}",mo=":function\\(a,b\\)\\{var c=a\\[0\\];a\\[0\\]=a\\[b%a\\.length\\];a\\[b(?:%a.length|)\\]=c(?:;return a)?\\}",yo=`function(?: ${Me})?\\(a\\)\\{a=a\\.split\\(""\\);\\s*((?:(?:a=)?${Me}${ho}\\(a,\\d+\\);)+)return a\\.join\\(""\\)\\}`,_o=`var (${Me})=\\{((?:(?:${et}${bo}|${et}${po}|${et}${go}|${et}${mo}),?\\n?)+)\\};`,m="[a-zA-Z0-9$_]",Li=`${m}+`,Di="\\[(\\d+)]",To=[`${m}+="nn"\\[\\+${m}+\\.${m}+],${m}+=${m}+\\.get\\(${m}+\\)\\)&&\\(${m}+=(${m}+)\\[(\\d+)]`,`${m}+="nn"\\[\\+${m}+\\.${m}+],${m}+=${m}+\\.get\\(${m}+\\)\\).+\\|\\|(${m}+)\\(""\\)`,`\\(${m}=String\\.fromCharCode\\(110\\),${m}=${m}\\.get\\(${m}\\)\\)&&\\(${m}=(${Li})(?:${Di})?\\(${m}\\)`,`\\.get\\("n"\\)\\)&&\\(${m}=(${Li})(?:${Di})?\\(${m}\\)`,'(\\w+).length\\|\\|\\w+\\(""\\)','\\w+.length\\|\\|(\\w+)\\(""\\)'],wo='function\\(\\s*(\\w+)\\s*\\)\\s*\\{var\\s*(\\w+)=(?:\\1\\.split\\(.*?\\)|String\\.prototype\\.split\\.call\\(\\1,.*?\\)),\\s*(\\w+)=(\\[.*?]);\\s*\\3\\[\\d+](.*?try)(\\{.*?})catch\\(\\s*(\\w+)\\s*\\)\\s*\\{\\s*return"enhanced_except_([A-z0-9-]+)"\\s*\\+\\s*\\1\\s*}\\s*return\\s*(\\2\\.join\\(""\\)|Array\\.prototype\\.join\\.call\\(\\2,""\\))};',gr="sig",mr="ncode",br="YBDProjectDecipherFunc",Ni="YBDProjectNTransformFunc",ki=lo.Platform.getShim();function qi(i,e){let t=e.match(new RegExp(i,"s"));if(!t)throw new Error(`Could not match ${i}`);return t}o(qi,"matchRegex");function pr(i,e){return qi(i,e)[0]}o(pr,"matchFirst");function ne(i,e){return qi(i,e)[1]}o(ne,"matchGroup1");function Hi(i,e){let t;for(let r of e)try{t=ne(r,i);try{t=ne(`${t.replace(/\$/g,"\\$")}=\\[([a-zA-Z0-9$\\[\\]]{2,})\\]`,i)}catch{}break}catch{continue}if(!t||t.includes("["))throw Error();return t}o(Hi,"getFunctionName");function Bi(i,e){for(let t of i)try{let r=t(e);if(!r)continue;return r}catch{continue}return null}o(Bi,"getExtractFunctions");function Eo(i){try{let e=pr(_o,i),t=pr(yo,i),r=`var ${br}=${t};`,n=`${br}(${gr});`;return e+r+n}catch{return null}}o(Eo,"extractDecipherFunc");function Po(i){try{let e=Hi(i,uo),t=`(${e.replace(/\$/g,"\\$")}function\\([a-zA-Z0-9_]+\\)\\{.+?\\})`,r=`var ${ne(t,i)};`,n=ne(";([A-Za-z0-9_\\$]{2,})\\.\\w+\\(",r),l=`(var ${n.replace(/\$/g,"\\$")}=\\{[\\s\\S]+?\\}\\};)`,u=ne(l,i),c=`${br}(${gr});`;return u+r+c}catch{return null}}o(Po,"extractDecipherWithName");function So(i){try{let e=pr(wo,i),t=`var ${Ni}=${e};`,r=`${Ni}(${mr});`;return t+r}catch{return null}}o(So,"extractNTransformFunc");function Ao(i){try{let e=Hi(i,To),t=`(${e.replace(/\$/g,"\\$")}=\\s*function([\\S\\s]*?\\}\\s*return (([\\w$]+?\\.join\\(""\\))|(Array\\.prototype\\.join\\.call\\([\\w$]+?,[\\n\\s]*(("")|(\\("",""\\)))\\)))\\s*\\}))`,r=`var ${ne(t,i)};`,n=`${e}(${mr});`;return r+n}catch{return null}}o(Ao,"extractNTransformWithName");function Ro(i,e){let t=Bi([Po,Eo],e);return t||Ui.Logger.warning(`Could not parse decipher function.
Please report this issue with "${i}" in Issues at ${ki.info.issuesUrl}.
Stream URL will be missing.`),{argumentName:gr,code:t||""}}o(Ro,"getDecipherFunction");function vo(i,e){let t=Bi([So,Ao],e);return t||Ui.Logger.warning(`Could not parse n transform function.
Please report this issue with "${i}" in Issues at ${ki.info.issuesUrl}.`),{argumentName:mr,code:t||""}}o(vo,"getNTransformFunction")});var it=h(rt=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0});rt.Signature=void 0;var Co=P(),Fi=E(),xi=yr(),Mo=/signatureTimestamp:(\d+)/g,_r=Co.Platform.getShim(),$i=_r.fileCache;function Vi(i,e,t){let r=i;if(r._deciphered=!0,!e)return r;let n=o(a=>{var b,f;let s=new URLSearchParams("?"+a),d=((b=s.get("url"))==null?void 0:b.toString())||"",p=s.get("s");if(!p)return d;try{let g=new URL(decodeURIComponent(d)),_=_r.polyfills.eval(`var ${e.argumentName}='${decodeURIComponent(p)}';${e.code}`);return g.searchParams.set(((f=s.get("sp"))==null?void 0:f.toString())||"sig",_),g.toString()}catch(g){return Fi.Logger.debug(`[ Decipher ]: <error>Failed</error> to decipher URL: <error>${g}</error>`),d}},"decipher"),l=o(a=>{let s=new URL(decodeURIComponent(a)),d=s.searchParams.get("n");if(!d||!t)return a;try{let p=_r.polyfills.eval(`var ${t.argumentName}='${decodeURIComponent(d)}';${t.code}`);return s.searchParams.set("n",p),s.toString()}catch(p){return Fi.Logger.debug(`[ NTransform ]: <error>Failed</error> to transform N: <error>${p}</error>`),a}},"nTransform"),u=!i.url,c=i.url||i.signatureCipher||i.cipher;return c&&(r.url=l(u?n(c):c),delete r.signatureCipher,delete r.cipher),r}o(Vi,"getDecipheredFormat");var wr=class wr{constructor(){this.decipherFunction=null,this.nTransformFunction=null}static getSignatureTimestamp(e){if(!e)return"0";let t=e.match(Mo);return t?t[0].split(":")[1]:"0"}decipherFormat(e){return Vi(e,this.decipherFunction,this.nTransformFunction)}decipherFormats(e){let t={};return e.forEach(r=>{r&&(Vi(r,this.decipherFunction,this.nTransformFunction),t[r.url]=r)}),t}async getDecipherFunctions({id:e,body:t}){if(this.decipherFunction)return this.decipherFunction;let r=await $i.get("html5Player");if(r)return this.decipherFunction||(this.decipherFunction=r.functions.decipher),r;let n=(0,xi.getDecipherFunction)(e,t)||null;return this.decipherFunction=n,n}async getNTransform({id:e,body:t}){if(this.nTransformFunction)return this.nTransformFunction;let r=await $i.get("html5Player");if(r)return this.nTransformFunction||(this.nTransformFunction=r.functions.nTransform),r;let n=(0,xi.getNTransformFunction)(e,t)||null;return this.nTransformFunction=n,n}};o(wr,"Signature");var Tr=wr;rt.Signature=Tr});var at=h(Sr=>{"use strict";Object.defineProperty(Sr,"__esModule",{value:!0});Sr.getPlayerFunctions=No;var Oo=P(),Io=it(),nt=te(),ji=q(),Lo=E(),Ki=yr(),Pr=Oo.Platform.getShim(),Gi=`https://raw.githubusercontent.com/${Pr.info.repo.user}/${Pr.info.repo.name}/refs/heads/dev/data/player`,Er=Pr.fileCache;function Do(i){if(!i)return null;let e=i.match(/player\\\/([a-zA-Z0-9]+)\\\//);return e?e[1]:null}o(Do,"getPlayerId");async function No(i,e){let t=await Er.get("html5Player");if(t&&t.signatureTimestamp)return t;Lo.Logger.debug("To speed up processing, html5Player and signatureTimestamp are pre-fetched and cached.");let r,n;if(!(e!=null&&e.useRetrievedFunctionsFromGithub))try{let c=await nt.Fetcher.request(ji.Url.getIframeApiUrl(),i);r=Do(c)}catch{}if(e!=null&&e.useRetrievedFunctionsFromGithub||!r){let c=await nt.Fetcher.request(Gi+"/data.json");return Er.set("html5Player",c),JSON.parse(c)}let l=ji.Url.getPlayerJsUrl(r);if(l)try{n=await nt.Fetcher.request(l,i)}catch{}if(!n)try{n=await nt.Fetcher.request(Gi+"/base.js")}catch{}if(!n)throw new Error("Failed to retrieve player body.");let u={id:r,body:n,signatureTimestamp:l&&Io.Signature.getSignatureTimestamp(n)||"",functions:{decipher:(0,Ki.getDecipherFunction)(r,n),nTransform:(0,Ki.getNTransformFunction)(r,n)}};return Er.set("html5Player",JSON.stringify(u)),u}o(No,"getPlayerFunctions")});var vr=h(ot=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});ot.FormatParser=void 0;var Uo=te(),ko=q(),Rr=class Rr{static parseFormats(e){let t=[];return e&&e.streamingData&&(t=t.concat(e.streamingData.formats).concat(e.streamingData.adaptiveFormats)),t}static async getM3U8(e,t){let r=new URL(e,ko.Url.getBaseUrl()),n=await Uo.Fetcher.request(r.toString(),t),l={};return n.split(`
`).filter(u=>/^https?:\/\//.test(u)).forEach(u=>{let c=u.match(/\/itag\/(\d+)\//)||[],a=parseInt(c[1]);l[u]={itag:a,url:u}}),l}static parseAdditionalManifests(e,t){let r=e&&e.streamingData,n=[];return r&&r.hlsManifestUrl&&n.push(this.getM3U8(r.hlsManifestUrl,t)),n}};o(Rr,"FormatParser");var Ar=Rr;ot.FormatParser=Ar});var Ir=h(Mr=>{"use strict";Object.defineProperty(Mr,"__esModule",{value:!0});var Wi=E(),Or=class Or{static checkResponse(e,t){var r,n,l;try{if(e.status==="fulfilled")return e.value===null?null:(Wi.Logger.debug(`[ ${t} ]: <success>Success</success>`),Object.assign({},e.value));{let u=e.reason||{};return Wi.Logger.debug(`[ ${t} ]: <error>Error</error> (Reason: <error>${((r=u.error)==null?void 0:r.message)||((n=u.error)==null?void 0:n.toString())}</error>)`),u}}catch{return(l=e||{})==null?void 0:l.reason}}};o(Or,"ApiBase");var Cr=Or;Mr.default=Cr});var zi=h(Oe=>{"use strict";var qo=Oe&&Oe.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Oe,"__esModule",{value:!0});var Dr;(function(i){i[i.web=0]="web",i[i.webCreator=1]="webCreator",i[i.webEmbedded=2]="webEmbedded",i[i.tvEmbedded=3]="tvEmbedded",i[i.ios=4]="ios",i[i.android=5]="android",i[i.mweb=6]="mweb",i[i.tv=7]="tv"})(Dr||(Dr={}));var Nr;(function(i){i.web="Web",i.webCreator="WebCreator",i.webEmbedded="WebEmbedded",i.tvEmbedded="TvEmbedded",i.ios="Ios",i.android="Android",i.mweb="MWeb",i.tv="Tv"})(Nr||(Nr={}));var V=Qe(),Ho=be(),Lr=E(),Yi=qo(Ir()),kr=class kr{static async getApiResponses(e,t){var c;let r={web:t.includes("web")?V.Web.getPlayerResponse(e):Promise.reject(null),webCreator:t.includes("webCreator")?V.WebCreator.getPlayerResponse(e):Promise.reject(null),webEmbedded:t.includes("webEmbedded")?V.WebEmbedded.getPlayerResponse(e):Promise.reject(null),tvEmbedded:t.includes("tvEmbedded")?V.TvEmbedded.getPlayerResponse(e):Promise.reject(null),ios:t.includes("ios")?V.Ios.getPlayerResponse(e):Promise.reject(null),android:t.includes("android")?V.Android.getPlayerResponse(e):Promise.reject(null),mweb:t.includes("mweb")?V.MWeb.getPlayerResponse(e):Promise.reject(null),tv:t.includes("tv")?V.Tv.getPlayerResponse(e):Promise.reject(null)},n=await Promise.allSettled(Object.values(r)),l={web:null,webCreator:null,webEmbedded:null,tvEmbedded:null,ios:null,android:null,mweb:null,tv:null};t.forEach(a=>{var s;l[a]=((s=Yi.default.checkResponse(n[Dr[a]],Nr[a]))==null?void 0:s.contents)||null});let u=n.every(a=>a.status==="rejected");if(u){let a=`All player APIs responded with an error. (Clients: ${t.join(", ")})
For details, specify \`logDisplay: ["debug", "info", "success", "warning", "error"]\` in the constructor options of the YtdlCore class.`;if(l.ios&&!l.ios.videoDetails)throw new Ho.UnrecoverableError(a+`
Note: This error cannot continue processing. (Details: ${JSON.stringify(l.ios.playabilityStatus.reason)})`,l.ios.playabilityStatus.reason);if(!l.web){Lr.Logger.info("As a fallback to obtain the minimum information, the web client is forced to adapt.");let s=(await Promise.allSettled([V.Web.getPlayerResponse(e)]))[0];l.web=((c=Yi.default.checkResponse(s,"Web"))==null?void 0:c.contents)||null}Lr.Logger.error(a),Lr.Logger.info("Only minimal information is available, as information from the Player API is not available.")}return{isMinimalMode:u,responses:l}}};o(kr,"PlayerApi");var Ur=kr;Oe.default=Ur});var Xi=h(Ie=>{"use strict";var Bo=Ie&&Ie.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ie,"__esModule",{value:!0});var Fo=Qe(),xo=Bo(Ir()),Hr=class Hr{static async getApiResponses(e){var l;let t={web:Fo.Web.getNextResponse(e)},r=await Promise.allSettled(Object.values(t));return{web:((l=xo.default.checkResponse(r[0],"Next"))==null?void 0:l.contents)||null}}};o(Hr,"NextApi");var qr=Hr;Ie.default=qr});var en=h(xr=>{"use strict";Object.defineProperty(xr,"__esModule",{value:!0});var Br=q(),$o=E(),Vo=/^\d+$/,jo=/^(?:(?:(\d+):)?(\d{1,2}):)?(\d{1,2})(?:\.(\d{3}))?$/,Ko=/(-?\d+)(ms|s|m|h)/g,st={ms:1,s:1e3,m:6e4,h:36e5};function Go(i){if(typeof i=="number")return i;if(Vo.test(i))return+i;let e=jo.exec(i);if(e)return+(e[1]||0)*st.h+ +(e[2]||0)*st.m+ +e[3]*st.s+ +(e[4]||0);{let t=0;for(let r of i.matchAll(Ko))t+=+r[1]*st[r[2]];return t}}o(Go,"parseTimestamp");function Y(i){return i&&i.runs?i.runs[0].text:i?i.simpleText:""}o(Y,"getText");function Zi(i){return!!(i&&i.find(e=>e.metadataBadgeRenderer.tooltip==="Verified"))}o(Zi,"isVerified");function Wo(i,e="en"){let t=new Date,r=Math.floor((t.getTime()-i.getTime())/1e3),n=new Intl.RelativeTimeFormat(e,{numeric:"always"});return r<60?n.format(-r,"second"):r<3600?n.format(-Math.floor(r/60),"minute"):r<86400?n.format(-Math.floor(r/3600),"hour"):r<2592e3?n.format(-Math.floor(r/86400),"day"):r<31536e3?n.format(-Math.floor(r/2592e3),"month"):n.format(-Math.floor(r/31536e3),"year")}o(Wo,"getRelativeTime");function Qi(i){let e=i.slice(-1).toUpperCase(),t=parseFloat(i.slice(0,-1));switch(e){case"K":return t*1e3;case"M":return t*1e6;case"B":return t*1e9;default:return parseFloat(i)}}o(Qi,"parseStringToNumber");function Ji(i){var e,t;if(!i)return null;try{let r=Y(i.viewCountText),n=Y(i.shortViewCountText);/^\d/.test(n)||(n=""),r=(/^\d/.test(r)?r:n).split(" ")[0];let l=i.shortBylineText.runs[0].navigationEndpoint.browseEndpoint,u=l.browseId,c=Y(i.shortBylineText),a=decodeURIComponent((l.canonicalBaseUrl||"").split("/").slice(-1)[0]||""),s=Y(i.publishedTimeText),d=n.split(" ")[0];return{id:i.videoId,title:Y(i.title),published:s||null,author:{id:u,name:c,user:a,channelUrl:`https://www.youtube.com/channel/${u}`,userUrl:"https://www.youtube.com/"+(a.includes("@")?a:"user/"+a),thumbnails:(e=i.channelThumbnail.thumbnails||[])==null?void 0:e.map(b=>(b.url=new URL(b.url,Br.Url.getBaseUrl()).toString(),b)),subscriberCount:null,verified:Zi(i.ownerBadges||[])},shortViewCountText:d,viewCount:parseInt(r.replace(/,/g,"")),lengthSeconds:i.lengthText?Math.floor(Go(Y(i.lengthText))/1e3):null,thumbnails:i.thumbnail.thumbnails||[],richThumbnails:i.richThumbnail?((t=i.richThumbnail.movingThumbnailRenderer.movingThumbnailDetails)==null?void 0:t.thumbnails)||[]:[],isLive:!!(i.badges&&i.badges.find(b=>b.metadataBadgeRenderer.label==="LIVE NOW"))}}catch(r){return $o.Logger.debug(`<error>Failed</error> to parse related video (ID: ${(i==null?void 0:i.videoId)||"Unknown"}): <error>${r}</error>`),null}}o(Ji,"parseRelatedVideo");var $r=class $r{static getMedia(e){var n;if(!e)return null;let t={category:"",categoryUrl:"",thumbnails:[]},r=null;try{r=((n=e.microformat)==null?void 0:n.playerMicroformatRenderer)||null}catch{}if(!r)return null;try{t.category=r.category,t.thumbnails=r.thumbnail.thumbnails||[],t.category==="Music"?t.categoryUrl=Br.Url.getBaseUrl()+"/music":t.category==="Gaming"&&(t.categoryUrl=Br.Url.getBaseUrl()+"/gaming")}catch{}return t}static getAuthor(e){if(!e)return null;let t=null,r=null,n=null,l=[],u=null,c=!1,a=null;try{let s=e.contents.twoColumnWatchNextResults.results.results.contents.find(d=>d.videoSecondaryInfoRenderer);a=s==null?void 0:s.videoSecondaryInfoRenderer}catch{}if(!a||!a.owner)return null;try{let s=a.owner.videoOwnerRenderer;t=s.title.runs[0].text||null,r=s.navigationEndpoint.browseEndpoint.browseId||null,n=s.navigationEndpoint.browseEndpoint.canonicalBaseUrl.replace("/","")||null,l=s.thumbnail.thumbnails||[],u=Math.floor(Qi(s.subscriberCountText.simpleText.split(" ")[0]))||null,c=Zi(s.badges||[])}catch{}try{return{id:r||"",name:t||"",user:n||"",channelUrl:r?`https://www.youtube.com/channel/${r}`:"",externalChannelUrl:r?`https://www.youtube.com/channel/${r}`:"",userUrl:"https://www.youtube.com"+n,thumbnails:l,subscriberCount:u,verified:c}}catch{return null}}static getAuthorFromPlayerResponse(e){var d,p,b;let t=null,r=null,n=null,l=[],u=null,c=!1,a=null,s=null;try{a=((d=e.microformat)==null?void 0:d.playerMicroformatRenderer)||null,s=(b=(p=e.endscreen)==null?void 0:p.endscreenRenderer.elements.find(f=>f.endscreenElementRenderer.style==="CHANNEL"))==null?void 0:b.endscreenElementRenderer}catch{}if(!a)return null;try{t=a.ownerChannelName||null,r=a.externalChannelId,n="@"+(a.ownerProfileUrl||"").split("@")[1],l=s.image.thumbnails||[],u=null,c=!1}catch{}try{return{id:r||"",name:t||"",user:n||"",channelUrl:r?`https://www.youtube.com/channel/${r}`:"",externalChannelUrl:r?`https://www.youtube.com/channel/${r}`:"",userUrl:"https://www.youtube.com/"+n,thumbnails:l,subscriberCount:u,verified:c}}catch{return null}}static getLikes(e){if(!e)return null;try{let t=e.contents.twoColumnWatchNextResults.results.results.contents,r=t.find(a=>a.videoPrimaryInfoRenderer),n=r.videoPrimaryInfoRenderer.videoActions.menuRenderer.topLevelButtons,l=n.filter(a=>a.segmentedLikeDislikeButtonViewModel)[0].segmentedLikeDislikeButtonViewModel.likeButtonViewModel.likeButtonViewModel.toggleButtonViewModel.toggleButtonViewModel.defaultButtonViewModel.buttonViewModel,u=l.accessibilityText,c=l.title;if(u){let a=u.match(/[\d,.]+/)||[];return parseInt((a[0]||"").replace(/\D+/g,""))}else if(c)return Qi(c);return null}catch{return null}}static getRelatedVideos(e){if(!e)return[];let t=[];try{t=e.contents.twoColumnWatchNextResults.secondaryResults.secondaryResults.results}catch{}let r=[];for(let n of t){let l=n.compactVideoRenderer;if(l){let u=Ji(l);u&&r.push(u)}else{let u=n.compactAutoplayRenderer||n.itemSectionRenderer;if(!u||!Array.isArray(u.contents))continue;for(let c of u.contents){let a=Ji(c.compactVideoRenderer);a&&r.push(a)}}}return r}static cleanVideoDetails(e,t,r="en"){let n=e;n.thumbnail&&(n.thumbnails=n.thumbnail.thumbnails);let l=n.shortDescription||Y(n.description);if(l&&(n.description=l),typeof n.thumbnail<"u"&&delete n.thumbnail,typeof n.shortDescription<"u"&&delete n.shortDescription,t){n.lengthSeconds=parseInt(t.lengthSeconds||e.lengthSeconds.toString()),n.publishDate=t.publishDate||e.publishDate||null,n.published=null;try{n.publishDate&&(n.published=Wo(new Date(n.publishDate),r)||null)}catch{}}return n.lengthSeconds&&(n.lengthSeconds=parseInt(n.lengthSeconds)),n.viewCount&&(n.viewCount=parseInt(n.viewCount)),n}static getStoryboards(e){if(!e||!e.storyboards)return[];let t=e.storyboards&&e.storyboards.playerStoryboardSpecRenderer&&e.storyboards.playerStoryboardSpecRenderer.spec&&e.storyboards.playerStoryboardSpecRenderer.spec.split("|");if(!t)return[];let r=new URL(t.shift()||"");return t.map((n,l)=>{let[u,c,a,s,d,p,b,f]=n.split("#");r.searchParams.set("sigh",f),a=parseInt(a,10),s=parseInt(s,10),d=parseInt(d,10);let g=Math.ceil(a/(s*d));return{templateUrl:r.toString().replace("$L",l.toString()).replace("$N",b),thumbnailWidth:parseInt(u,10),thumbnailHeight:parseInt(c,10),thumbnailCount:a,interval:parseInt(p,10),columns:s,rows:d,storyboardCount:g}})}static getChapters(e){if(!e)return[];let t=e.playerOverlays&&e.playerOverlays.playerOverlayRenderer,r=t&&t.decoratedPlayerBarRenderer&&t.decoratedPlayerBarRenderer.decoratedPlayerBarRenderer&&t.decoratedPlayerBarRenderer.decoratedPlayerBarRenderer.playerBar,n=r&&r.multiMarkersPlayerBarRenderer&&r.multiMarkersPlayerBarRenderer.markersMap,l=Array.isArray(n)&&n.find(c=>c.value&&Array.isArray(c.value.chapters));return l?l.value.chapters.map(c=>({title:Y(c.chapterRenderer.title),startTime:c.chapterRenderer.timeRangeStartMillis/1e3})):[]}};o($r,"InfoExtras");var Fr=$r;xr.default=Fr});var Gr=h(ae=>{"use strict";var lt=ae&&ae.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ae,"__esModule",{value:!0});ae._getBasicInfo=nn;ae.getBasicInfo=as;var Yo=hr(),rn=P(),Le=E(),zo=lt(ye()),jr=q(),Xo=at(),Qo=vr(),Jo=lt(zi()),Zo=lt(Xi()),R=lt(en()),es=["support.google.com/youtube/?p=age_restrictions","youtube.com/t/community_guidelines"],ts=["web","webCreator","webEmbedded","ios","android","mweb","tv","tvEmbedded"],tn=["web","mweb","tv","ios"],Kr=rn.Platform.getShim(),Vr=Kr.cache,rs={videoDetails:{videoUrl:"",videoId:"",playabilityStatus:"UNKNOWN",title:"",author:null,lengthSeconds:0,viewCount:0,likes:null,media:null,storyboards:[],chapters:[],thumbnails:[],description:null,keywords:[],channelId:"",ageRestricted:!1,allowRatings:!1,isOwnerViewing:!1,isCrawlable:!1,isPrivate:!1,isUnpluggedCorpus:!1,isLiveContent:!1,isUpcoming:!1,isLowLatencyLiveStream:!1,liveBroadcastDetails:{isLiveNow:!1,startTimestamp:""},published:null,publishDate:null,latencyClass:null},relatedVideos:[],formats:[],full:!1,_metadata:{isMinimumMode:!1,clients:[],html5PlayerId:"",id:"",options:{}},_ytdl:{version:Kr.info.version}},is=JSON.stringify(rs);function ns(i,e){return(!i||i&&i.length===0)&&(Le.Logger.warning("At least one client must be specified."),i=tn),i=i.filter(t=>ts.includes(t)),e?i:[...new Set([...tn,...i])]}o(ns,"setupClients");async function nn(i,e,t){var Ue,ke,qe,ce,He,Be,de,fe;let r=rn.Platform.getShim(),n=(0,Xo.getPlayerFunctions)(e,e.html5Player);if(e.oauth2&&e.oauth2 instanceof Yo.OAuth2&&e.oauth2.shouldRefreshToken()&&(Le.Logger.info("The specified OAuth2 token has expired and will be renewed automatically."),await e.oauth2.refreshAccessToken()),!e.poToken&&!e.disablePoTokenAutoGeneration){Le.Logger.warning("Specify poToken for stable and fast operation. See README for details."),Le.Logger.info("Automatically generates poToken, but stable operation cannot be guaranteed.");let{poToken:I,visitorData:L}=await r.poToken();e.poToken=I,e.visitorData=L}e.poToken&&!e.visitorData&&Le.Logger.warning("If you specify a poToken, you must also specify the visitorData."),e.clients=ns(e.clients,(Ue=e.disableDefaultClients)!=null?Ue:!1);let l=await n,u=parseInt(l.signatureTimestamp||"0")||0,c={videoId:i,signatureTimestamp:u,options:e},a=JSON.parse(is),s={playerApiRequest:Jo.default.getApiResponses(c,e.clients),nextApiRequest:Zo.default.getApiResponses(c)},{isMinimalMode:d,responses:p}=await s.playerApiRequest,b=await s.nextApiRequest,f=Object.values(p)||[];a._metadata.isMinimumMode=d,a._metadata.html5PlayerId=l.id,a._metadata.clients=e.clients,a._metadata.options=e,a._metadata.id=i,(e.includesPlayerAPIResponse||t)&&(a._playerApiResponses=p),(e.includesNextAPIResponse||t)&&(a._nextApiResponses=b);function g(I,L,N){try{return I.filter(Q=>typeof Q=="object"&&Q!==null&&Q[L]&&(N?Q[L]===N:!0))[0]}catch{return}}o(g,"getValue");let _=g(f,"storyboards")||null,y=((ke=g(f,"videoDetails"))==null?void 0:ke.videoDetails)||{},j=((qe=g(f,"microformat"))==null?void 0:qe.microformat)||null,le=((Be=(He=(ce=p.web)==null?void 0:ce.microformat)==null?void 0:He.playerMicroformatRenderer)==null?void 0:Be.liveBroadcastDetails)||null,Tt=R.default.getStoryboards(_),ue=R.default.getMedia(p.web)||R.default.getMedia(p.webCreator)||R.default.getMedia(p.ios)||R.default.getMedia(p.android)||R.default.getMedia(p.webEmbedded)||R.default.getMedia(p.tvEmbedded)||R.default.getMedia(p.mweb)||R.default.getMedia(p.tv),wt=!!ue&&es.some(I=>Object.values(ue||{}).some(L=>typeof L=="string"&&L.includes(I))),Et={author:R.default.getAuthor(b.web),media:ue,likes:R.default.getLikes(b.web),ageRestricted:wt,storyboards:Tt,chapters:R.default.getChapters(b.web)},Pt=f.reduce((I,L)=>[...I,...Qo.FormatParser.parseFormats(L)],[]);return a.videoDetails.videoUrl=jr.Url.getWatchPageUrl(i),a.videoDetails=R.default.cleanVideoDetails(Object.assign(a.videoDetails,y,Et),(j==null?void 0:j.playerMicroformatRenderer)||null,e.hl),a.videoDetails.playabilityStatus=((de=g(f,"playabilityStatus","OK"))==null?void 0:de.playabilityStatus.status)||((fe=f[0])==null?void 0:fe.playabilityStatus.status)||"UNKNOWN",a.videoDetails.liveBroadcastDetails=le,a.relatedVideos=e.includesRelatedVideo?R.default.getRelatedVideos(b.web):[],a.formats=Pt.filter(Boolean),a}o(nn,"_getBasicInfo");async function as(i,e){Kr.runtime!=="serverless"&&zo.default.checkForUpdates();let t=jr.Url.getVideoID(i)||(jr.Url.validateID(i)?i:null);if(!t)throw new Error("The URL specified is not a valid URL.");let r=["getBasicInfo",t,e.hl,e.gl].join("-");if(await Vr.has(r))return Vr.get(r);let n=await nn(t,e,!1);return Vr.set(r,n,{ttl:60*30}),n}o(as,"getBasicInfo")});var an=h(ut=>{"use strict";Object.defineProperty(ut,"__esModule",{value:!0});ut.FORMATS=void 0;var os={5:{mimeType:'video/flv; codecs="Sorenson H.283, mp3"',qualityLabel:"240p",bitrate:25e4,audioBitrate:64},6:{mimeType:'video/flv; codecs="Sorenson H.263, mp3"',qualityLabel:"270p",bitrate:8e5,audioBitrate:64},13:{mimeType:'video/3gp; codecs="MPEG-4 Visual, aac"',qualityLabel:null,bitrate:5e5,audioBitrate:null},17:{mimeType:'video/3gp; codecs="MPEG-4 Visual, aac"',qualityLabel:"144p",bitrate:5e4,audioBitrate:24},18:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"360p",bitrate:5e5,audioBitrate:96},22:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"720p",bitrate:2e6,audioBitrate:192},34:{mimeType:'video/flv; codecs="H.264, aac"',qualityLabel:"360p",bitrate:5e5,audioBitrate:128},35:{mimeType:'video/flv; codecs="H.264, aac"',qualityLabel:"480p",bitrate:8e5,audioBitrate:128},36:{mimeType:'video/3gp; codecs="MPEG-4 Visual, aac"',qualityLabel:"240p",bitrate:175e3,audioBitrate:32},37:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"1080p",bitrate:3e6,audioBitrate:192},38:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"3072p",bitrate:35e5,audioBitrate:192},43:{mimeType:'video/webm; codecs="VP8, vorbis"',qualityLabel:"360p",bitrate:5e5,audioBitrate:128},44:{mimeType:'video/webm; codecs="VP8, vorbis"',qualityLabel:"480p",bitrate:1e6,audioBitrate:128},45:{mimeType:'video/webm; codecs="VP8, vorbis"',qualityLabel:"720p",bitrate:2e6,audioBitrate:192},46:{mimeType:'audio/webm; codecs="vp8, vorbis"',qualityLabel:"1080p",bitrate:null,audioBitrate:192},82:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"360p",bitrate:5e5,audioBitrate:96},83:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"240p",bitrate:5e5,audioBitrate:96},84:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"720p",bitrate:2e6,audioBitrate:192},85:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"1080p",bitrate:3e6,audioBitrate:192},91:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"144p",bitrate:1e5,audioBitrate:48},92:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"240p",bitrate:15e4,audioBitrate:48},93:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"360p",bitrate:5e5,audioBitrate:128},94:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"480p",bitrate:8e5,audioBitrate:128},95:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"720p",bitrate:15e5,audioBitrate:256},96:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"1080p",bitrate:25e5,audioBitrate:256},100:{mimeType:'audio/webm; codecs="VP8, vorbis"',qualityLabel:"360p",bitrate:null,audioBitrate:128},101:{mimeType:'audio/webm; codecs="VP8, vorbis"',qualityLabel:"360p",bitrate:null,audioBitrate:192},102:{mimeType:'audio/webm; codecs="VP8, vorbis"',qualityLabel:"720p",bitrate:null,audioBitrate:192},120:{mimeType:'video/flv; codecs="H.264, aac"',qualityLabel:"720p",bitrate:2e6,audioBitrate:128},127:{mimeType:'audio/ts; codecs="aac"',qualityLabel:null,bitrate:null,audioBitrate:96},128:{mimeType:'audio/ts; codecs="aac"',qualityLabel:null,bitrate:null,audioBitrate:96},132:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"240p",bitrate:15e4,audioBitrate:48},133:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"240p",bitrate:2e5,audioBitrate:null},134:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"360p",bitrate:3e5,audioBitrate:null},135:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"480p",bitrate:5e5,audioBitrate:null},136:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"720p",bitrate:1e6,audioBitrate:null},137:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"1080p",bitrate:25e5,audioBitrate:null},138:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"4320p",bitrate:135e5,audioBitrate:null},139:{mimeType:'audio/mp4; codecs="aac"',qualityLabel:null,bitrate:null,audioBitrate:48},140:{mimeType:'audio/m4a; codecs="aac"',qualityLabel:null,bitrate:null,audioBitrate:128},141:{mimeType:'audio/mp4; codecs="aac"',qualityLabel:null,bitrate:null,audioBitrate:256},151:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"720p",bitrate:5e4,audioBitrate:24},160:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"144p",bitrate:1e5,audioBitrate:null},171:{mimeType:'audio/webm; codecs="vorbis"',qualityLabel:null,bitrate:null,audioBitrate:128},172:{mimeType:'audio/webm; codecs="vorbis"',qualityLabel:null,bitrate:null,audioBitrate:192},231:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"480p",bitrate:5e5,audioBitrate:null},232:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"720p",bitrate:8e5,audioBitrate:null},242:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"240p",bitrate:1e5,audioBitrate:null},243:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"360p",bitrate:25e4,audioBitrate:null},244:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"480p",bitrate:5e5,audioBitrate:null},247:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"720p",bitrate:7e5,audioBitrate:null},248:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"1080p",bitrate:15e5,audioBitrate:null},249:{mimeType:'audio/webm; codecs="opus"',qualityLabel:null,bitrate:null,audioBitrate:48},250:{mimeType:'audio/webm; codecs="opus"',qualityLabel:null,bitrate:null,audioBitrate:64},251:{mimeType:'audio/webm; codecs="opus"',qualityLabel:null,bitrate:null,audioBitrate:160},264:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"1440p",bitrate:4e6,audioBitrate:null},266:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"2160p",bitrate:125e5,audioBitrate:null},270:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"1080p",bitrate:25e5,audioBitrate:null},271:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"1440p",bitrate:9e6,audioBitrate:null},272:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"4320p",bitrate:2e7,audioBitrate:null},278:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"144p 30fps",bitrate:8e4,audioBitrate:null},298:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"720p",bitrate:3e6,audioBitrate:null},299:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"1080p",bitrate:55e5,audioBitrate:null},300:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"720p",bitrate:1318e3,audioBitrate:48},301:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"1080p",bitrate:3e6,audioBitrate:128},302:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"720p HFR",bitrate:25e5,audioBitrate:null},303:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"1080p HFR",bitrate:5e6,audioBitrate:null},308:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"1440p HFR",bitrate:1e7,audioBitrate:null},311:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"720p",bitrate:125e4,audioBitrate:null},312:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"1080p",bitrate:25e5,audioBitrate:null},313:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"2160p",bitrate:13e6,audioBitrate:null},315:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"2160p HFR",bitrate:2e7,audioBitrate:null},330:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"144p HDR, HFR",bitrate:8e4,audioBitrate:null},331:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"240p HDR, HFR",bitrate:1e5,audioBitrate:null},332:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"360p HDR, HFR",bitrate:25e4,audioBitrate:null},333:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"240p HDR, HFR",bitrate:5e5,audioBitrate:null},334:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"720p HDR, HFR",bitrate:1e6,audioBitrate:null},335:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"1080p HDR, HFR",bitrate:15e5,audioBitrate:null},336:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"1440p HDR, HFR",bitrate:5e6,audioBitrate:null},337:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"2160p HDR, HFR",bitrate:12e6,audioBitrate:null}};ut.FORMATS=os});var ct=h(oe=>{"use strict";var ss=oe&&oe.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(oe,"__esModule",{value:!0});oe.FormatUtils=void 0;var ls=an(),us=ss(ye()),cs=["mp4a","mp3","vorbis","aac","opus","flac"],ds=["mp4v","avc1","Sorenson H.283","MPEG-4 Visual","VP8","VP9","av01","H.264"];function on(i,e){return i.findIndex(t=>e.codec.text&&e.codec.text.includes(t))}o(on,"getEncodingRank");function sn(i){return i.bitrate||0}o(sn,"getVideoBitrate");function ln(i){return on(ds,i)}o(ln,"getVideoEncodingRank");function un(i){return i.audioBitrate||0}o(un,"getAudioBitrate");function cn(i){return on(cs,i)}o(cn,"getAudioEncodingRank");function Xr(i,e,t){let r=0;for(let n of t)if(r=n(e)-n(i),r!==0)break;return r}o(Xr,"sortFormatsBy");function fs(i){return parseInt(i.quality.label)||0}o(fs,"getQualityLabel");function Wr(i,e){return Xr(i,e,[fs,sn,ln])}o(Wr,"sortFormatsByVideo");function Yr(i,e){return Xr(i,e,[un,cn])}o(Yr,"sortFormatsByAudio");function hs(i,e){let t=o(r=>e.find(n=>`${n.itag}`==`${r}`)||null,"getFormat");if(Array.isArray(i)){let r=i.find(n=>t(n));return r&&t(r)||null}else return t(i||"")||null}o(hs,"getFormatByQuality");var Qr=class Qr{static sortFormats(e,t){return Xr(e,t,[r=>+!!r.isHLS,r=>+!!r.isDashMPD,r=>+(parseInt(r.contentLength)>0),r=>+(r.hasVideo&&r.hasAudio),r=>+r.hasVideo,r=>parseInt(r.quality.label)||0,sn,un,ln,cn])}static filterFormats(e,t){let r;switch(t){case"videoandaudio":case"audioandvideo":{r=o(n=>n.hasVideo&&n.hasAudio,"fn");break}case"video":{r=o(n=>n.hasVideo,"fn");break}case"videoonly":{r=o(n=>n.hasVideo&&!n.hasAudio,"fn");break}case"audio":{r=o(n=>n.hasAudio,"fn");break}case"audioonly":{r=o(n=>n.hasAudio&&!n.hasVideo,"fn");break}default:if(typeof t=="function")r=t;else throw new TypeError(`Given filter (${t}) is not supported`)}return e.filter(n=>!!n.url&&r(n))}static chooseFormat(e,t){if(typeof t.format=="object"){if(!t.format.url)throw new Error("Invalid format given, did you use `ytdl.getFullInfo()`?");return t.format}t.filter&&(e=this.filterFormats(e,t.filter)),t.excludingClients&&(e=e.filter(l=>{var u;return!((u=t.excludingClients)!=null&&u.includes(l.sourceClientName))})),t.includingClients&&t.includingClients!=="all"&&(e=e.filter(l=>{var u;return(u=t.includingClients)==null?void 0:u.includes(l.sourceClientName)})),e.some(l=>l.isHLS)&&(e=e.filter(l=>l.isHLS||!l.isLive));let r=t.quality||"highest",n;switch(r){case"highest":{n=e[0];break}case"lowest":{n=e[e.length-1];break}case"highestaudio":{e=this.filterFormats(e,"audio"),e.sort(Yr);let l=e[0];e=e.filter(c=>Yr(l,c)===0);let u=e.map(c=>parseInt(c.quality.label)||0).sort((c,a)=>c-a)[0];n=e.find(c=>(parseInt(c.quality.label)||0)===u);break}case"lowestaudio":{e=this.filterFormats(e,"audio"),e.sort(Yr),n=e[e.length-1];break}case"highestvideo":{e=this.filterFormats(e,"video"),e.sort(Wr);let l=e[0];e=e.filter(c=>Wr(l,c)===0);let u=e.map(c=>c.audioBitrate||0).sort((c,a)=>c-a)[0];n=e.find(c=>(c.audioBitrate||0)===u);break}case"lowestvideo":{e=this.filterFormats(e,"video"),e.sort(Wr),n=e[e.length-1];break}default:{n=hs(r,e);break}}if(!n)throw new Error(`No such format found: ${r}`);return n}static getClientName(e){try{switch(new URL(e).searchParams.get("c")){case"WEB":return"web";case"MWEB":return"mweb";case"WEB_CREATOR":return"webCreator";case"WEB_EMBEDDED_PLAYER":return"webEmbedded";case"IOS":return"ios";case"ANDROID":return"android";case"TVHTML5_SIMPLY_EMBEDDED_PLAYER":return"tvEmbedded";case"TVHTML5":return"tv";default:return"unknown"}}catch{return"unknown"}}static addFormatMeta(e,t){var s;let r=e.itag,n=ls.FORMATS[r]||null,l=e.mimeType&&us.default.between(e.mimeType,'codecs="','"'),u=/\/manifest\/hls_(variant|playlist)\//.test(e.url),c={itag:r,url:e.url,mimeType:e.mimeType||"video/mp4",codec:{text:l||"h264",video:null,audio:null},quality:{text:e.quality,label:e.qualityLabel||(u?"video":"audio")},bitrate:e.bitrate||(n==null?void 0:n.bitrate)||NaN,audioBitrate:(n==null?void 0:n.audioBitrate)||NaN,contentLength:e.contentLength,container:((s=e.mimeType)==null?void 0:s.split(";")[0].split("/")[1])||null,hasVideo:!!e.qualityLabel||!e.audioQuality,hasAudio:!!e.audioQuality,isLive:/\bsource[/=]yt_live_broadcast\b/.test(e.url),isHLS:u,isDashMPD:/\/manifest\/dash\//.test(e.url),sourceClientName:u?"ios":this.getClientName(e.url)||"unknown"},a=c.codec.text.split(", ");return t&&(c.originalData=e),c.codec.video=c.hasVideo?a[0]:null,c.codec.audio=c.hasAudio?a[1]||a[0]:null,c}};o(Qr,"FormatUtils");var zr=Qr;oe.FormatUtils=zr});var hn=h(De=>{"use strict";var bs=De&&De.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(De,"__esModule",{value:!0});De.getFullInfo=Es;var ps=it(),gs=P(),ms=bs(ye()),dn=q(),fn=ct(),ys=vr(),_s=Gr(),Ts=at(),Jr=gs.Platform.getShim().cache,Zr=new ps.Signature;async function ws(i,e){var a;let t=await(0,_s._getBasicInfo)(i,e,!0),r=(0,Ts.getPlayerFunctions)(e,e.html5Player),n=Object.assign({},t),l=[],u=await r;await Zr.getDecipherFunctions(u),await Zr.getNTransform(u);try{let s=t.formats;l.push(Zr.decipherFormats(s)),e.parsesHLSFormat&&((a=n._playerApiResponses)!=null&&a.ios)&&l.push(...ys.FormatParser.parseAdditionalManifests(n._playerApiResponses.ios,e))}catch{}let c=Object.values(Object.assign({},...await Promise.all(l)));return n.formats=c.map(s=>{var d;return fn.FormatUtils.addFormatMeta(s,(d=e.includesOriginalFormatData)!=null?d:!1)}),n.formats.sort(fn.FormatUtils.sortFormats),n.full=!0,e.includesPlayerAPIResponse||delete n._playerApiResponses,e.includesNextAPIResponse||delete n._nextApiResponses,n}o(ws,"_getFullInfo");async function Es(i,e){ms.default.checkForUpdates();let t=dn.Url.getVideoID(i)||(dn.Url.validateID(i)?i:null);if(!t)throw new Error("The URL specified is not a valid URL.");let r=["getFullInfo",t,e.hl,e.gl].join("-");if(await Jr.has(r))return Jr.get(r);let n=await ws(t,e);return Jr.set(r,n,{ttl:60*30}),n}o(Es,"getFullInfo")});var ei=h(z=>{"use strict";var Ps=z&&z.__createBinding||(Object.create?function(i,e,t,r){r===void 0&&(r=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:o(function(){return e[t]},"get")}),Object.defineProperty(i,r,n)}:function(i,e,t,r){r===void 0&&(r=t),i[r]=e[t]}),bn=z&&z.__exportStar||function(i,e){for(var t in i)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Ps(e,i,t)};Object.defineProperty(z,"__esModule",{value:!0});bn(Gr(),z);bn(hn(),z)});var Tn=h(ft=>{"use strict";Object.defineProperty(ft,"__esModule",{value:!0});ft.download=Is;ft.downloadFromInfo=Os;var Ss=ei(),pn=ct(),dt=E(),ti=P(),As=ge(),Rs={method:"GET",headers:{accept:"*/*",origin:"https://www.youtube.com",referer:"https://www.youtube.com",DNT:"?1"},redirect:"follow"},mn=ti.Platform.getShim().polyfills.ReadableStream;function yn(i,e,t){if(typeof t.rewriteRequest=="function"){let{url:r}=t.rewriteRequest(i,e,{isDownloadUrl:!0});i=r}if(t.originalProxy)try{let r=new URL(t.originalProxy.download);i.includes(r.host)||(i=`${r.protocol}//${r.host}${r.pathname}?${t.originalProxy.urlQueryName||"url"}=${encodeURIComponent(i)}`)}catch(r){dt.Logger.debug("[ OriginalProxy ]: The original proxy could not be adapted due to the following error: "+r)}return i}o(yn,"requestSetup");async function vs(i,e){return new Promise(t=>{let r=o(l=>{l.status===200?(dt.Logger.debug(`[ ${i.sourceClientName} ]: <success>Video URL is normal.</success> The response was received with status code <success>"${l.status}"</success>.`),t({valid:!0})):n(new Error(`Status code: ${l.status}`))},"successResponseHandler"),n=o(l=>{dt.Logger.debug(`[ ${i.sourceClientName} ]: The URL for the video <error>did not return a successful response</error>. Got another format.
Reason: <error>${l.message}</error>`),t({valid:!1,reason:l.message})},"errorResponseHandler");try{let l=yn(i.url,{},e);ti.Platform.getShim().fetcher(l,{method:"HEAD"}).then(u=>r(u),u=>n(u))}catch(l){n(l)}})}o(vs,"isDownloadUrlValid");function Cs(i,e){return new Promise(async t=>{let r=["web"],n,l=!1;try{n=pn.FormatUtils.chooseFormat(i,e)}catch(u){throw u}if(!n)throw new Error("Failed to retrieve format data.");for(;l===!1;){if(!n)throw new Error("Failed to retrieve format data.");let{valid:u,reason:c}=await vs(n,e);if(u)l=!0;else{n.sourceClientName!=="unknown"&&r.push(n.sourceClientName);try{n=pn.FormatUtils.chooseFormat(i,{excludingClients:r,includingClients:c!=null&&c.includes("403")?["ios","android"]:"all",quality:e.quality,filter:e.filter})}catch(a){throw a}}}t(n)})}o(Cs,"getValidDownloadUrl");async function*Ms(i){if(i instanceof mn){let e=i.getReader();try{for(;;){let{done:t,value:r}=await e.read();if(t)return;yield r}}finally{e.releaseLock()}}else try{for await(let e of i)yield e}finally{i.destroy()}}o(Ms,"streamToIterable");function gn(i,e,t,r){i=yn(i,e,t),dt.Logger.debug("[ Download ]: Requesting URL: <magenta>"+i+"</magenta>");let n=r?{...e,signal:r.signal}:e;return ti.Platform.getShim().fetcher(i,n)}o(gn,"downloadVideo");async function _n(i,e){if(!i.formats.length)throw new Error("This video is not available due to lack of video format.");let t=typeof e.dlChunkSize=="number"?e.dlChunkSize:1024*1024*10,r=(e.filter==="audioandvideo"||e.filter==="videoandaudio")&&!e.range,n=await Cs(i.formats,e),l={...Rs},u=e.range?e.range.start:0,c=e.range&&e.range.end||t,a=!1,s,d=n.sourceClientName==="ios"||n.sourceClientName==="android"?n.sourceClientName:n.sourceClientName.includes("tv")?"tv":"desktop";if(l.headers={...l.headers,"User-Agent":As.UserAgent.getRandomUserAgent(d)},r){let b=await gn(n.url,l,e);if(!b.ok)throw new Error(`Download failed with status code <warning>"${b.status}"</warning>.`);let f=b.body;if(!f)throw new Error("Failed to retrieve response body.");return f}return new mn({start(){},pull:o(async b=>{if(a){b.close();return}let f=n.contentLength?parseInt(n.contentLength):0;return(c>=f||e.range)&&(a=!0),new Promise(async(g,_)=>{try{s=new AbortController;let y=await gn(n.url+"&range="+u+"-"+c,l,e,s);if(!y.ok)throw new Error(`Download failed with status code <warning>"${y.status}"</warning>.`);let j=y.body;if(!j)throw new Error("Failed to retrieve response body.");for await(let le of Ms(j))b.enqueue(le);u=c+1,c+=t,g()}catch(y){_(y)}})},"pull"),async cancel(b){s.abort(b)}},{highWaterMark:e.highWaterMark||1024*512,size(b){return(b==null?void 0:b.byteLength)||0}})}o(_n,"downloadFromInfoCallback");async function Os(i,e){if(!i.full)throw new Error("Cannot use `ytdl.downloadFromInfo()` when called with info from `ytdl.getBasicInfo()`");return new Promise(t=>{t(_n(i,e))})}o(Os,"downloadFromInfo");function Is(i,e){return new Promise(t=>{(0,Ss.getFullInfo)(i,e).then(r=>{t(_n(r,e))}).catch(r=>{throw r})})}o(Is,"download")});var wn=h(Z=>{"use strict";var Ls=Z&&Z.__createBinding||(Object.create?function(i,e,t,r){r===void 0&&(r=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:o(function(){return e[t]},"get")}),Object.defineProperty(i,r,n)}:function(i,e,t,r){r===void 0&&(r=t),i[r]=e[t]}),Ds=Z&&Z.__exportStar||function(i,e){for(var t in i)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Ls(e,i,t)};Object.defineProperty(Z,"__esModule",{value:!0});Ds(Tn(),Z)});var Rn=h(mt=>{"use strict";Object.defineProperty(mt,"__esModule",{value:!0});mt.YtdlCore=void 0;var ht=P(),En=wn(),Pn=ei(),Sn=at(),bt=hr(),gt=q(),pt=ct(),Ns=Ke(),ee=E(),Us=it(),An=ht.Platform.getShim(),ks=An.cache,X=An.fileCache,ri=class ri{constructor({hl:e,gl:t,rewriteRequest:r,poToken:n,disablePoTokenAutoGeneration:l,visitorData:u,includesPlayerAPIResponse:c,includesNextAPIResponse:a,includesOriginalFormatData:s,includesRelatedVideo:d,clients:p,disableDefaultClients:b,disableRetryRequest:f,oauth2Credentials:g,parsesHLSFormat:_,originalProxy:y,quality:j,filter:le,excludingClients:Tt,includingClients:ue,range:wt,begin:Et,liveBuffer:Pt,highWaterMark:Ue,IPv6Block:ke,dlChunkSize:qe,html5Player:ce,disableBasicCache:He,disableFileCache:Be,fetcher:de,logDisplay:fe,noUpdate:I,disableInitialSetup:L}={}){this.hl="en",this.gl="US",this.disablePoTokenAutoGeneration=!1,this.includesPlayerAPIResponse=!1,this.includesNextAPIResponse=!1,this.includesOriginalFormatData=!1,this.includesRelatedVideo=!0,this.disableDefaultClients=!1,this.disableRetryRequest=!1,this.oauth2=null,this.parsesHLSFormat=!1,this.excludingClients=[],this.includingClients="all",this.version=Ns.VERSION;let N=ht.Platform.getShim(),Q=(fe==="none"?[]:fe)||["info","success","warning","error"];if(N.options.other.logDisplay=Q,ee.Logger.logDisplay=Q,N.options.other.noUpdate=I!=null?I:!1,de&&(N.fetcher=de,N.requestRelated.originalProxy=y,N.requestRelated.rewriteRequest=r),He&&ks.disable(),Be&&X.disable(),this.hl=e||"en",this.gl=t||"US",this.rewriteRequest=r||void 0,this.disablePoTokenAutoGeneration=l!=null?l:!1,this.includesPlayerAPIResponse=c!=null?c:!1,this.includesNextAPIResponse=a!=null?a:!1,this.includesOriginalFormatData=s!=null?s:!1,this.includesRelatedVideo=d!=null?d:!0,this.clients=p||void 0,this.disableDefaultClients=b!=null?b:!1,this.parsesHLSFormat=_!=null?_:!1,this.disableRetryRequest=f!=null?f:!1,this.originalProxy=y||void 0,this.originalProxy){let ni=this.originalProxy.urlQueryName||"url";ee.Logger.debug(`<debug>"${this.originalProxy.base}"</debug> is used for <blue>API requests</blue>.`),ee.Logger.debug(`<debug>"${this.originalProxy.download}"</debug> is used for <blue>video downloads</blue>.`),ee.Logger.debug(`The query name <debug>"${ni}"</debug> is used to specify the URL in the request. <blue>(?${ni}=...)</blue>`)}this.quality=j||void 0,this.filter=le||void 0,this.excludingClients=Tt||[],this.includingClients=ue||"all",this.range=wt||void 0,this.begin=Et||void 0,this.liveBuffer=Pt||void 0,this.highWaterMark=Ue||void 0,this.IPv6Block=ke||void 0,this.dlChunkSize=qe||void 0,this.html5Player=ce||void 0,this.init({disableInitialSetup:L,poToken:n,visitorData:u,oauth2Credentials:g,html5Player:ce},{originalProxy:y,rewriteRequest:r}),N.options.download={hl:this.hl,gl:this.gl,rewriteRequest:this.rewriteRequest,poToken:this.poToken,disablePoTokenAutoGeneration:this.disablePoTokenAutoGeneration,visitorData:this.visitorData,includesPlayerAPIResponse:this.includesPlayerAPIResponse,includesNextAPIResponse:this.includesNextAPIResponse,includesOriginalFormatData:this.includesOriginalFormatData,includesRelatedVideo:this.includesRelatedVideo,clients:this.clients,disableDefaultClients:this.disableDefaultClients,oauth2Credentials:g,parsesHLSFormat:this.parsesHLSFormat,originalProxy:this.originalProxy,quality:this.quality,filter:this.filter,excludingClients:this.excludingClients,includingClients:this.includingClients,range:this.range,begin:this.begin,liveBuffer:this.liveBuffer,highWaterMark:this.highWaterMark,IPv6Block:this.IPv6Block,dlChunkSize:this.dlChunkSize,html5Player:this.html5Player,disableRetryRequest:this.disableRetryRequest},ht.Platform.load(N)}async init({disableInitialSetup:e,poToken:t,visitorData:r,oauth2Credentials:n,html5Player:l},u={}){if(!e){let c=(0,Sn.getPlayerFunctions)(u,l);await this.setPoToken(t),await this.setVisitorData(r),await this.setOAuth2(n||null),this.disablePoTokenAutoGeneration||this.automaticallyGeneratePoToken(u),await c}}async setPoToken(e){let t=await X.get("poToken");e?this.poToken=e:t&&(ee.Logger.debug("PoToken loaded from cache."),this.poToken=t||void 0),X.set("poToken",this.poToken||"",{ttl:60*60*24})}async setVisitorData(e){let t=await X.get("visitorData");e?this.visitorData=e:t&&(ee.Logger.debug("VisitorData loaded from cache."),this.visitorData=t||void 0),X.set("visitorData",this.visitorData||"",{ttl:60*60*24})}async setOAuth2(e){let t=await X.get("oauth2")||void 0;try{e?this.oauth2=new bt.OAuth2(e)||void 0:t?this.oauth2=new bt.OAuth2(t):this.oauth2=null}catch{this.oauth2=null}}automaticallyGeneratePoToken(e){!this.poToken&&!this.visitorData&&(ee.Logger.debug("Since PoToken and VisitorData are <warning>not specified</warning>, they are generated <info>automatically</info>."),this.generatePoToken(e).then(({poToken:t,visitorData:r})=>{this.poToken=t,this.visitorData=r,X.set("poToken",this.poToken||"",{ttl:60*60*24}),X.set("visitorData",this.visitorData||"",{ttl:60*60*24})}).catch(()=>{}))}initializeOptions(e){var r;let t={...e,oauth2:this.oauth2};return t.hl=e.hl||this.hl,t.gl=e.gl||this.gl,t.rewriteRequest=e.rewriteRequest||this.rewriteRequest,t.poToken=e.poToken||this.poToken,t.disablePoTokenAutoGeneration=e.disablePoTokenAutoGeneration||this.disablePoTokenAutoGeneration,t.visitorData=e.visitorData||this.visitorData,t.includesPlayerAPIResponse=e.includesPlayerAPIResponse||this.includesPlayerAPIResponse,t.includesNextAPIResponse=e.includesNextAPIResponse||this.includesNextAPIResponse,t.includesOriginalFormatData=e.includesOriginalFormatData||this.includesOriginalFormatData,t.includesRelatedVideo=e.includesRelatedVideo||this.includesRelatedVideo,t.clients=e.clients||this.clients,t.disableDefaultClients=e.disableDefaultClients||this.disableDefaultClients,t.disableRetryRequest=e.disableRetryRequest||this.disableRetryRequest,t.oauth2Credentials=e.oauth2Credentials||((r=this.oauth2)==null?void 0:r.getCredentials()),t.parsesHLSFormat=e.parsesHLSFormat||this.parsesHLSFormat,t.originalProxy=e.originalProxy||this.originalProxy||void 0,t.quality=e.quality||this.quality||void 0,t.filter=e.filter||this.filter||void 0,t.excludingClients=e.excludingClients||this.excludingClients||[],t.includingClients=e.includingClients||this.includingClients||"all",t.range=e.range||this.range||void 0,t.begin=e.begin||this.begin||void 0,t.liveBuffer=e.liveBuffer||this.liveBuffer||void 0,t.highWaterMark=e.highWaterMark||this.highWaterMark||void 0,t.IPv6Block=e.IPv6Block||this.IPv6Block||void 0,t.dlChunkSize=e.dlChunkSize||this.dlChunkSize||void 0,t.html5Player=e.html5Player||this.html5Player||void 0,!t.oauth2&&e.oauth2Credentials&&(t.oauth2=new bt.OAuth2(e.oauth2Credentials)),t}generatePoToken(e={}){return new Promise((t,r)=>{let n=ht.Platform.getShim().poToken;n(e).then(l=>{t(l)}).catch(l=>{r(l)})})}download(e,t={}){return(0,En.download)(e,this.initializeOptions(t))}downloadFromInfo(e,t={}){return(0,En.downloadFromInfo)(e,this.initializeOptions(t))}getBasicInfo(e,t={}){return(0,Pn.getBasicInfo)(e,this.initializeOptions(t))}getFullInfo(e,t={}){return(0,Pn.getFullInfo)(e,this.initializeOptions(t))}};o(ri,"YtdlCore");var M=ri;mt.YtdlCore=M;M.chooseFormat=pt.FormatUtils.chooseFormat;M.filterFormats=pt.FormatUtils.filterFormats;M.decipherFormats=function(i,e){return new Promise(async t=>{let r=await(0,Sn.getPlayerFunctions)({},e),n=new Us.Signature;await n.getDecipherFunctions(r),await n.getNTransform(r);let l=i.map(u=>n.decipherFormat(u));t(l)})};M.toVideoFormats=function(i,e=!1){let t=i.map(r=>pt.FormatUtils.addFormatMeta(r,e));return t.sort(pt.FormatUtils.sortFormats),t};M.createOAuth2Credentials=bt.OAuth2.createOAuth2Credentials;M.validateID=gt.Url.validateID;M.validateURL=gt.Url.validateURL;M.getURLVideoID=gt.Url.getURLVideoID;M.getVideoID=gt.Url.getVideoID});var Cn=h(vn=>{"use strict";Object.defineProperty(vn,"__esModule",{value:!0})});var On=h(Mn=>{"use strict";Object.defineProperty(Mn,"__esModule",{value:!0})});var Ln=h(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0})});var Nn=h(Dn=>{"use strict";Object.defineProperty(Dn,"__esModule",{value:!0})});var kn=h(Un=>{"use strict";Object.defineProperty(Un,"__esModule",{value:!0})});var qn=h(D=>{"use strict";var qs=D&&D.__createBinding||(Object.create?function(i,e,t,r){r===void 0&&(r=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:o(function(){return e[t]},"get")}),Object.defineProperty(i,r,n)}:function(i,e,t,r){r===void 0&&(r=t),i[r]=e[t]}),Ne=D&&D.__exportStar||function(i,e){for(var t in i)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&qs(e,i,t)};Object.defineProperty(D,"__esModule",{value:!0});Ne(Cn(),D);Ne(On(),D);Ne(Ln(),D);Ne(Nn(),D);Ne(kn(),D)});var Bn=h(Hn=>{"use strict";Object.defineProperty(Hn,"__esModule",{value:!0})});var xn=h(Fn=>{"use strict";Object.defineProperty(Fn,"__esModule",{value:!0})});var Vn=h($n=>{"use strict";Object.defineProperty($n,"__esModule",{value:!0})});var Kn=h(jn=>{"use strict";Object.defineProperty(jn,"__esModule",{value:!0})});var Wn=h(Gn=>{"use strict";Object.defineProperty(Gn,"__esModule",{value:!0})});var Yn=h(O=>{"use strict";var Hs=O&&O.__createBinding||(Object.create?function(i,e,t,r){r===void 0&&(r=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:o(function(){return e[t]},"get")}),Object.defineProperty(i,r,n)}:function(i,e,t,r){r===void 0&&(r=t),i[r]=e[t]}),se=O&&O.__exportStar||function(i,e){for(var t in i)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Hs(e,i,t)};Object.defineProperty(O,"__esModule",{value:!0});se(qn(),O);se(Bn(),O);se(xn(),O);se(Vn(),O);se(Kn(),O);se(Wn(),O)});var $s=h(U=>{var Bs=U&&U.__createBinding||(Object.create?function(i,e,t,r){r===void 0&&(r=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:o(function(){return e[t]},"get")}),Object.defineProperty(i,r,n)}:function(i,e,t,r){r===void 0&&(r=t),i[r]=e[t]}),Fs=U&&U.__exportStar||function(i,e){for(var t in i)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Bs(e,i,t)};Object.defineProperty(U,"__esModule",{value:!0});U.YtdlCore=void 0;var xs=P(),yt=Ke(),ii=class ii{constructor(e=60){this.ttl=e,this.isDisabled=!1}async getCache(){return await caches.open("ytdlCoreCache")}async get(e){if(this.isDisabled)return null;let t=await this.getCache(),r=await t.match(e);if(r)try{let n=await r.json();return Date.now()>n.expiration?null:n.contents}catch{}return null}async set(e,t,{ttl:r}={ttl:this.ttl}){if(this.isDisabled)return!0;let n=await this.getCache(),l=JSON.stringify({contents:t,expiration:Date.now()+r*1e3}),u=new Response(l,{headers:{"Content-Type":"application/json"}});try{return await n.put(e,u),!0}catch{return!1}}async has(e){return this.isDisabled?!1:await(await this.getCache()).match(e)!==void 0}async delete(e){if(this.isDisabled)return!0;let t=await this.getCache();try{return await t.delete(e)}catch{return!1}}disable(){this.isDisabled=!0}initialization(){}};o(ii,"CacheWithCacheStorage");var _t=ii;xs.Platform.load({runtime:"browser",server:!1,cache:new _t,fileCache:new _t,fetcher:o((i,e)=>fetch(i,e),"fetcher"),poToken:o(async()=>({poToken:"",visitorData:""}),"poToken"),options:{download:{hl:"en",gl:"US",includesPlayerAPIResponse:!1,includesNextAPIResponse:!1,includesOriginalFormatData:!1,includesRelatedVideo:!0,clients:["web","mweb","tv","ios"],disableDefaultClients:!1,disableFileCache:!1,parsesHLSFormat:!0},other:{logDisplay:["info","success","warning","error"],noUpdate:!1}},requestRelated:{rewriteRequest:o((i,e)=>({url:i,options:e}),"rewriteRequest"),originalProxy:null},info:{version:yt.VERSION,repo:{user:yt.USER_NAME,name:yt.REPO_NAME},issuesUrl:yt.ISSUES_URL},polyfills:{Headers,ReadableStream,eval}});var zn=Rn();Object.defineProperty(U,"YtdlCore",{enumerable:!0,get:o(function(){return zn.YtdlCore},"get")});Fs(Yn(),U);U.default=zn.YtdlCore});export default $s();

{
  "version": 3,
  "sources": ["../dist/index.js", "../dist/core/index.js", "../dist/core/challengeFetcher.js", "../dist/utils/constants.js", "../dist/utils/helpers.js", "../dist/core/webPoClient.js", "../dist/core/botGuardClient.js", "../dist/core/webPoMinter.js"],
  "sourcesContent": ["import * as BG from './core/index.js';\nexport { BG };\nexport default BG;\nexport * from './utils/index.js';\n", "export * as Challenge from './challengeFetcher.js';\nexport * as PoToken from './webPoClient.js';\nexport { default as WebPoMinter } from './webPoMinter.js';\nexport { default as BotGuardClient } from './botGuardClient.js';\n", "var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { base64ToU8, buildURL, GOOG_API_KEY } from '../utils/index.js';\n/**\n * Creates a challenge.\n * @param bgConfig - The config.\n * @param interpreterHash - The ID of the challenge script. If provided, the server will assume that\n * the client already has the script and will not return it.\n * @returns The challenge data.\n */\nexport function create(bgConfig, interpreterHash) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const requestKey = bgConfig.requestKey;\n        if (!bgConfig.fetch)\n            throw new Error('[Challenge]: Fetch function not provided');\n        const payload = [requestKey];\n        if (interpreterHash)\n            payload.push(interpreterHash);\n        const response = yield bgConfig.fetch(buildURL('Create', bgConfig.useYouTubeAPI), {\n            method: 'POST',\n            headers: {\n                'content-type': 'application/json+protobuf',\n                'x-goog-api-key': GOOG_API_KEY,\n                'x-user-agent': 'grpc-web-javascript/0.1'\n            },\n            body: JSON.stringify(payload)\n        });\n        if (!response.ok)\n            throw new Error(`[Challenge]: Failed to fetch challenge: ${response.status}`);\n        const rawData = yield response.json();\n        return parseChallengeData(rawData);\n    });\n}\n/**\n * Parses the challenge data from the provided response data.\n */\nexport function parseChallengeData(rawData) {\n    let challengeData = [];\n    if (rawData.length > 1 && typeof rawData[1] === 'string') {\n        const descrambled = descramble(rawData[1]);\n        challengeData = JSON.parse(descrambled || '[]');\n    }\n    else if (rawData.length && typeof rawData[0] === 'object') {\n        challengeData = rawData[0];\n    }\n    const [messageId, wrappedScript, wrappedUrl, interpreterHash, program, globalName, , clientExperimentsStateBlob] = challengeData;\n    const privateDoNotAccessOrElseSafeScriptWrappedValue = Array.isArray(wrappedScript) ? wrappedScript.find((value) => value && typeof value === 'string') : null;\n    const privateDoNotAccessOrElseTrustedResourceUrlWrappedValue = Array.isArray(wrappedUrl) ? wrappedUrl.find((value) => value && typeof value === 'string') : null;\n    return {\n        messageId,\n        interpreterJavascript: {\n            privateDoNotAccessOrElseSafeScriptWrappedValue,\n            privateDoNotAccessOrElseTrustedResourceUrlWrappedValue\n        },\n        interpreterHash,\n        program,\n        globalName,\n        clientExperimentsStateBlob\n    };\n}\n/**\n * Descrambles the given challenge data.\n */\nexport function descramble(scrambledChallenge) {\n    const buffer = base64ToU8(scrambledChallenge);\n    if (buffer.length)\n        return new TextDecoder().decode(buffer.map((b) => b + 97));\n}\n", "export const GOOG_BASE_URL = 'https://jnn-pa.googleapis.com';\nexport const YT_BASE_URL = 'https://www.youtube.com';\nexport const GOOG_API_KEY = 'AIzaSyDyT5W0Jh49F30Pqqtyfdf7pDLFKLJoAnw';\nexport const USER_AGENT = 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36(KHTML, like Gecko)';\n", "import { GOOG_BASE_URL, YT_BASE_URL } from './constants.js';\nconst base64urlCharRegex = /[-_.]/g;\nconst base64urlToBase64Map = {\n    '-': '+',\n    _: '/',\n    '.': '='\n};\nexport function base64ToU8(base64) {\n    let base64Mod;\n    if (base64urlCharRegex.test(base64)) {\n        base64Mod = base64.replace(base64urlCharRegex, function (match) {\n            return base64urlToBase64Map[match];\n        });\n    }\n    else {\n        base64Mod = base64;\n    }\n    base64Mod = atob(base64Mod);\n    const result = new Uint8Array([...base64Mod].map((char) => char.charCodeAt(0)));\n    return result;\n}\nexport function u8ToBase64(u8, base64url = false) {\n    const result = btoa(String.fromCharCode(...u8));\n    if (base64url) {\n        return result\n            .replace(/\\+/g, '-')\n            .replace(/\\//g, '_');\n    }\n    return result;\n}\nexport function buildURL(endpointName, useYouTubeAPI) {\n    return `${useYouTubeAPI ? YT_BASE_URL : GOOG_BASE_URL}/${useYouTubeAPI ? 'api/jnn/v1' : '$rpc/google.internal.waa.v1.Waa'}/${endpointName}`;\n}\n", "var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport BotGuardClient from './botGuardClient.js';\nimport WebPoMinter from './webPoMinter.js';\nimport { GOOG_API_KEY } from '../utils/constants.js';\nimport { base64ToU8, buildURL, u8ToBase64 } from '../utils/helpers.js';\n/**\n * Generates a Proof of Origin Token.\n * @param args - The arguments for generating the token.\n */\nexport function generate(args) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const { program, bgConfig, globalName } = args;\n        const { identifier } = bgConfig;\n        const botguard = yield BotGuardClient.create({ program, globalName, globalObj: bgConfig.globalObj });\n        const webPoSignalOutput = [];\n        const botguardResponse = yield botguard.snapshot({ webPoSignalOutput });\n        const payload = [bgConfig.requestKey, botguardResponse];\n        const integrityTokenResponse = yield bgConfig.fetch(buildURL('GenerateIT', bgConfig.useYouTubeAPI), {\n            method: 'POST',\n            headers: {\n                'content-type': 'application/json+protobuf',\n                'x-goog-api-key': GOOG_API_KEY,\n                'x-user-agent': 'grpc-web-javascript/0.1'\n            },\n            body: JSON.stringify(payload)\n        });\n        const integrityTokenJson = yield integrityTokenResponse.json();\n        const [integrityToken, estimatedTtlSecs, mintRefreshThreshold, websafeFallbackToken] = integrityTokenJson;\n        const integrityTokenData = {\n            integrityToken,\n            estimatedTtlSecs,\n            mintRefreshThreshold,\n            websafeFallbackToken\n        };\n        const webPoMinter = yield WebPoMinter.create(integrityTokenData, webPoSignalOutput);\n        const poToken = yield webPoMinter.mintAsWebsafeString(identifier);\n        return { poToken, integrityTokenData };\n    });\n}\n/**\n * Creates a placeholder PoToken. This can be used while `sps` (StreamProtectionStatus) is 2, but will not work once it changes to 3.\n * @param identifier - Visitor ID or Data Sync ID.\n */\nexport function generatePlaceholder(identifier, clientState) {\n    const encodedIdentifier = new TextEncoder().encode(identifier);\n    if (encodedIdentifier.length > 118)\n        throw new Error('DFO:Invalid');\n    const timestamp = Math.floor(Date.now() / 1000);\n    const randomKeys = [Math.floor(Math.random() * 256), Math.floor(Math.random() * 256)];\n    // NOTE: The \"0\" value before the client state is supposed to be someVal & 0xFF.\n    // It is always 0 though, so I didn't bother investigating further.\n    const header = randomKeys.concat([\n        0, (clientState !== null && clientState !== void 0 ? clientState : 1)\n    ], [\n        (timestamp >> 24) & 0xFF,\n        (timestamp >> 16) & 0xFF,\n        (timestamp >> 8) & 0xFF,\n        timestamp & 0xFF\n    ]);\n    const packet = new Uint8Array(2 + header.length + encodedIdentifier.length);\n    packet[0] = 34;\n    packet[1] = header.length + encodedIdentifier.length;\n    packet.set(header, 2);\n    packet.set(encodedIdentifier, 2 + header.length);\n    const payload = packet.subarray(2);\n    const keyLength = randomKeys.length;\n    for (let i = keyLength; i < payload.length; i++) {\n        payload[i] ^= payload[i % keyLength];\n    }\n    return u8ToBase64(packet, true);\n}\n/**\n * Decodes a placeholder potoken string into its components.\n * @param placeholder - The placeholder potoken to decode.\n * @throws Error if the packet length is invalid.\n */\nexport function decodePlaceholder(placeholder) {\n    const packet = base64ToU8(placeholder);\n    const payloadLength = packet[1];\n    const totalPacketLength = 2 + payloadLength;\n    if (packet.length !== totalPacketLength)\n        throw new Error('Invalid packet length.');\n    const payload = packet.subarray(2);\n    // Decrypt the payload by reversing the XOR operation\n    const keyLength = 2;\n    for (let i = keyLength; i < payload.length; ++i) {\n        payload[i] ^= payload[i % keyLength];\n    }\n    const keys = [payload[0], payload[1]];\n    const unknownVal = payload[2]; // The masked property I mentioned in the function above\n    const clientState = payload[3];\n    const timestamp = (payload[4] << 24) |\n        (payload[5] << 16) |\n        (payload[6] << 8) |\n        payload[7];\n    const date = new Date(timestamp * 1000);\n    const identifier = new TextDecoder().decode(payload.subarray(8));\n    return {\n        identifier,\n        timestamp,\n        unknownVal,\n        clientState,\n        keys,\n        date\n    };\n}\n", "var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport default class BotGuardClient {\n    constructor(options) {\n        this.vmFunctions = {};\n        this.userInteractionElement = options.userInteractionElement;\n        this.vm = options.globalObj[options.globalName];\n        this.program = options.program;\n    }\n    static create(options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield new BotGuardClient(options).load();\n        });\n    }\n    load() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.vm)\n                throw new Error('[BotGuardClient]: VM not found in the global object');\n            if (!this.vm.a)\n                throw new Error('[BotGuardClient]: Could not load program');\n            const vmFunctionsCallback = (asyncSnapshotFunction, shutdownFunction, passEventFunction, checkCameraFunction) => {\n                Object.assign(this.vmFunctions, { asyncSnapshotFunction, shutdownFunction, passEventFunction, checkCameraFunction });\n            };\n            try {\n                this.syncSnapshotFunction = yield this.vm.a(this.program, vmFunctionsCallback, true, this.userInteractionElement, () => { }, [[], []])[0];\n            }\n            catch (error) {\n                throw new Error(`[BotGuardClient]: Failed to load program (${error.message})`);\n            }\n            return this;\n        });\n    }\n    /**\n     * @example\n     * ```ts\n     * const result = await botguard.snapshot({\n     *   contentBinding: {\n     *     c: \"a=6&a2=10&b=SZWDwKVIuixOp7Y4euGTgwckbJA&c=1729143849&d=1&t=7200&c1a=1&c6a=1&c6b=1&hh=HrMb5mRWTyxGJphDr0nW2Oxonh0_wl2BDqWuLHyeKLo\",\n     *     e: \"ENGAGEMENT_TYPE_VIDEO_LIKE\",\n     *     encryptedVideoId: \"P-vC09ZJcnM\"\n     *    }\n     * });\n     *\n     * console.log(result);\n     * ```\n     */\n    snapshot(args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new Promise((resolve, reject) => {\n                if (!this.vmFunctions.asyncSnapshotFunction)\n                    return reject(new Error('[BotGuardClient]: Async snapshot function not found'));\n                this.vmFunctions.asyncSnapshotFunction((response) => resolve(response), [\n                    args.contentBinding,\n                    args.signedTimestamp,\n                    args.webPoSignalOutput,\n                    args.skipPrivacyBuffer\n                ]);\n            });\n        });\n    }\n    invoke(args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.syncSnapshotFunction)\n                throw new Error('[BotGuardClient]: Sync snapshot function not found');\n            const result = yield this.syncSnapshotFunction([\n                args.contentBinding,\n                args.signedTimestamp,\n                args.webPoSignalOutput,\n                args.skipPrivacyBuffer\n            ]);\n            return result;\n        });\n    }\n    passEvent(args) {\n        if (!this.vmFunctions.passEventFunction)\n            throw new Error('[BotGuardClient]: Pass event function not found');\n        this.vmFunctions.passEventFunction(args);\n    }\n    checkCamera(args) {\n        if (!this.vmFunctions.checkCameraFunction)\n            throw new Error('[BotGuardClient]: Check camera function not found');\n        this.vmFunctions.checkCameraFunction(args);\n    }\n    shutdown() {\n        if (!this.vmFunctions.shutdownFunction)\n            throw new Error('[BotGuardClient]: Shutdown function not found');\n        this.vmFunctions.shutdownFunction();\n    }\n}\n", "var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { base64ToU8, u8ToBase64 } from '../utils/helpers.js';\nexport default class WebPoMinter {\n    constructor(mintCallback) {\n        this.mintCallback = mintCallback;\n    }\n    static create(integrityTokenResponse, webPoSignalOutput) {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            const getMinter = webPoSignalOutput[0];\n            if (!getMinter)\n                throw new Error('PMD:Undefined');\n            const mintCallback = yield getMinter(base64ToU8((_a = integrityTokenResponse.integrityToken) !== null && _a !== void 0 ? _a : ''));\n            if (!(mintCallback instanceof Function))\n                throw new Error('APF:Failed');\n            return new WebPoMinter(mintCallback);\n        });\n    }\n    mintAsWebsafeString(identifier) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const result = yield this.mint(identifier);\n            return u8ToBase64(result, true);\n        });\n    }\n    mint(identifier) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const result = yield this.mintCallback(new TextEncoder().encode(identifier));\n            if (!result)\n                throw new Error('YNJ:Undefined');\n            if (!(result instanceof Uint8Array))\n                throw new Error('ODM:Invalid');\n            return result;\n        });\n    }\n}\n"],
  "mappings": "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",
  "names": ["__awaiter", "__awaiter", "__awaiter"]
}
